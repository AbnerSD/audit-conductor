# Generated by zerotest
from __future__ import unicode_literals
from zerotest.request import Request
from zerotest.response import Response
from zerotest.response_matcher import ResponseMatcher


matcher = ResponseMatcher(ignore_all_headers=True)
verify_ssl = False


def test_get_root():
    request = Request(scheme='http', method='GET', headers={'Connection': 'keep-alive', 'Cache-Control': 'max-age=0', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0', 'If-Modified-Since': 'Thu, 10 Jan 2019 15:36:46 GMT'}, host='127.0.0.1:5000', path='/')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=304, headers={}, body='')
    matcher.match_responses(expect, real)


def test_get_style_css():
    request = Request(scheme='http', method='GET', headers={'Connection': 'keep-alive', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Accept': 'text/css,*/*;q=0.1', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0', 'If-Modified-Since': 'Mon, 14 Jan 2019 00:43:54 GMT'}, host='127.0.0.1:5000', path='/style.css')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=304, headers={}, body='')
    matcher.match_responses(expect, real)


def test_post_get_audit_state():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '0', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-state')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"all_contests":[{"candidates":["DEM Sheldon Whitehouse","REP Robert G. Flanders Jr."],"id":"senator","title":"Senator in Congress"},{"candidates":["DEM David N. Cicilline (13215)","REP Patrick J. Donovan"],"id":"rep_1","title":"Representative in Congress District 1 (13213)"},{"candidates":["DEM Gina M. Raimondo","MOD William H. Gilbert","REP Allan W. Fung","Com Anne Armstrong","Ind Luis Daniel Munoz","Ind Joseph A. Trillo"],"id":"governor","title":"Governor"},{"candidates":["DEM Daniel J. McKee","MOD Joel J. Hellmann","REP Paul E. Pence","Ind Jonathan J. Riccitelli","Ind Ross K. McCurdy"],"id":"lieutenant_governor","title":"Lieutenant Governor"},{"candidates":["DEM Nellie M. Gorbea","REP Pat V. Cortellessa"],"id":"secretary_of_state","title":"Secretary of State"},{"candidates":["DEM Peter F. Neronha","Com Alan Gordon"],"id":"attorney_general","title":"Attorney General"},{"candidates":["DEM Seth Magaziner","REP Michael G. Riley"],"id":"treasurer","title":"General Treasurer"},{"candidates":["Approve","Reject"],"id":"issue_1","title":"1. RHODE ISLAND SCHOOL BUILDINGS - $250,000,000"},{"candidates":["Approve","Reject"],"id":"issue_2","title":"2. HIGHER EDUCATION FACILITIES - $70,000,000"},{"candidates":["Approve","Reject"],"id":"issue_3","title":"3. GREEN ECONOMY AND CLEAN WATER - $47,300,000"}],"all_interpretations":[],"audit_name":"comparison-zerotest-2","audit_type_name":"ballot_comparison","ballot_ids":null,"ballot_manifest":[{"batch_id":"0201-A-1","box_letter":"A","first_imprinted_id":237000001,"folder_num":"1","last_imprinted_id":237000297,"municipality":"Bristol","num_sheets":297,"precinct_num":"0201"},{"batch_id":"0201-A-2","box_letter":"A","first_imprinted_id":237000298,"folder_num":"2","last_imprinted_id":237000397,"municipality":"Bristol","num_sheets":100,"precinct_num":"0201"},{"batch_id":"0201-A-3","box_letter":"A","first_imprinted_id":237000398,"folder_num":"3","last_imprinted_id":237000496,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-4","box_letter":"A","first_imprinted_id":237000497,"folder_num":"4","last_imprinted_id":237000595,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-5","box_letter":"A","first_imprinted_id":237000596,"folder_num":"5","last_imprinted_id":237000695,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-6","box_letter":"A","first_imprinted_id":237000696,"folder_num":"6","last_imprinted_id":237000794,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-7","box_letter":"A","first_imprinted_id":237000795,"folder_num":"7","last_imprinted_id":237000848,"municipality":"Bristol","num_sheets":54,"precinct_num":"0201"},{"batch_id":"0202-B-1","box_letter":"B","first_imprinted_id":237000849,"folder_num":"1","last_imprinted_id":237001047,"municipality":"Bristol","num_sheets":198,"precinct_num":"0202"},{"batch_id":"0202-B-2","box_letter":"B","first_imprinted_id":237001048,"folder_num":"2","last_imprinted_id":237001247,"municipality":"Bristol","num_sheets":199,"precinct_num":"0202"},{"batch_id":"0202-B-3","box_letter":"B","first_imprinted_id":237001248,"folder_num":"3","last_imprinted_id":237001348,"municipality":"Bristol","num_sheets":101,"precinct_num":"0202"},{"batch_id":"0203-C-1","box_letter":"C","first_imprinted_id":237001349,"folder_num":"1","last_imprinted_id":237001546,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-2","box_letter":"C","first_imprinted_id":237001547,"folder_num":"2","last_imprinted_id":237001744,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-3","box_letter":"C","first_imprinted_id":237001745,"folder_num":"3","last_imprinted_id":237001942,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-4","box_letter":"C","first_imprinted_id":237001943,"folder_num":"4","last_imprinted_id":237002140,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-5","box_letter":"C","first_imprinted_id":237002141,"folder_num":"5","last_imprinted_id":237002338,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-6","box_letter":"C","first_imprinted_id":237002339,"folder_num":"6","last_imprinted_id":237002535,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-7","box_letter":"C","first_imprinted_id":237002536,"folder_num":"7","last_imprinted_id":237002732,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-8","box_letter":"C","first_imprinted_id":237002733,"folder_num":"8","last_imprinted_id":237002929,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-9","box_letter":"C","first_imprinted_id":237002930,"folder_num":"9","last_imprinted_id":237003047,"municipality":"Bristol","num_sheets":118,"precinct_num":"0203"},{"batch_id":"0204-D-1","box_letter":"D","first_imprinted_id":237003048,"folder_num":"1","last_imprinted_id":237003245,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-2","box_letter":"D","first_imprinted_id":237003246,"folder_num":"2","last_imprinted_id":237003443,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-3","box_letter":"D","first_imprinted_id":237003444,"folder_num":"3","last_imprinted_id":237003642,"municipality":"Bristol","num_sheets":199,"precinct_num":"0204"},{"batch_id":"0204-D-4","box_letter":"D","first_imprinted_id":237003643,"folder_num":"4","last_imprinted_id":237003840,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-5","box_letter":"D","first_imprinted_id":237003942,"folder_num":"5","last_imprinted_id":237004139,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-6","box_letter":"D","first_imprinted_id":237004140,"folder_num":"6","last_imprinted_id":237004242,"municipality":"Bristol","num_sheets":103,"precinct_num":"0204"},{"batch_id":"0205-E-1","box_letter":"E","first_imprinted_id":237004243,"folder_num":"1","last_imprinted_id":237004440,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-2","box_letter":"E","first_imprinted_id":237004441,"folder_num":"2","last_imprinted_id":237004640,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0025-E-3","box_letter":"E","first_imprinted_id":237004641,"folder_num":"3","last_imprinted_id":237004837,"municipality":"Bristol","num_sheets":197,"precinct_num":"0025"},{"batch_id":"0205-E-4","box_letter":"E","first_imprinted_id":237004838,"folder_num":"4","last_imprinted_id":237005035,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-5","box_letter":"E","first_imprinted_id":237005091,"folder_num":"5","last_imprinted_id":237005294,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-6","box_letter":"E","first_imprinted_id":237005295,"folder_num":"6","last_imprinted_id":237005512,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-7","box_letter":"E","first_imprinted_id":237005513,"folder_num":"7","last_imprinted_id":237005689,"municipality":"Bristol","num_sheets":177,"precinct_num":"0205"},{"batch_id":"0206-F-1","box_letter":"F","first_imprinted_id":237005690,"folder_num":"1","last_imprinted_id":237005888,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-2","box_letter":"F","first_imprinted_id":237005889,"folder_num":"2","last_imprinted_id":237006086,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-3","box_letter":"F","first_imprinted_id":237006087,"folder_num":"3","last_imprinted_id":237006284,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-4","box_letter":"F","first_imprinted_id":237006285,"folder_num":"4","last_imprinted_id":237006482,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-5","box_letter":"F","first_imprinted_id":237006483,"folder_num":"5","last_imprinted_id":237006682,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-6","box_letter":"F","first_imprinted_id":237006683,"folder_num":"6","last_imprinted_id":237006741,"municipality":"Bristol","num_sheets":59,"precinct_num":"0206"},{"batch_id":"0207-G-1","box_letter":"G","first_imprinted_id":237006743,"folder_num":"1","last_imprinted_id":237006944,"municipality":"Bristol","num_sheets":198,"precinct_num":"0207"},{"batch_id":"0207-G-2","box_letter":"G","first_imprinted_id":237006945,"folder_num":"2","last_imprinted_id":237007141,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-3","box_letter":"G","first_imprinted_id":237007142,"folder_num":"3","last_imprinted_id":237007339,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-4","box_letter":"G","first_imprinted_id":237007538,"folder_num":"4","last_imprinted_id":237007667,"municipality":"Bristol","num_sheets":130,"precinct_num":"0207"},{"batch_id":"0208-H-1","box_letter":"H","first_imprinted_id":237007668,"folder_num":"1","last_imprinted_id":237007890,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-2","box_letter":"H","first_imprinted_id":237007891,"folder_num":"2","last_imprinted_id":237008088,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-3","box_letter":"H","first_imprinted_id":237008089,"folder_num":"3","last_imprinted_id":237008287,"municipality":"Bristol","num_sheets":199,"precinct_num":"0208"},{"batch_id":"0208-H-4","box_letter":"H","first_imprinted_id":237008288,"folder_num":"4","last_imprinted_id":237008466,"municipality":"Bristol","num_sheets":177,"precinct_num":"0208"},{"batch_id":"0208-H-5","box_letter":"H","first_imprinted_id":237008530,"folder_num":"5","last_imprinted_id":237008597,"municipality":"Bristol","num_sheets":68,"precinct_num":"0208"},{"batch_id":"0209-I-1","box_letter":"I","first_imprinted_id":237008598,"folder_num":"1","last_imprinted_id":237008786,"municipality":"Bristol","num_sheets":189,"precinct_num":"0209"},{"batch_id":"0299-J-1","box_letter":"J","first_imprinted_id":237008787,"folder_num":"1","last_imprinted_id":237008991,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-2","box_letter":"J","first_imprinted_id":237008992,"folder_num":"2","last_imprinted_id":237009195,"municipality":"Bristol","num_sheets":204,"precinct_num":"0299"},{"batch_id":"0299-J-3","box_letter":"J","first_imprinted_id":237009196,"folder_num":"3","last_imprinted_id":237009396,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-4","box_letter":"J","first_imprinted_id":237009397,"folder_num":"4","last_imprinted_id":237009517,"municipality":"Bristol","num_sheets":118,"precinct_num":"0299"}],"cvr_hash":"test-hash","main_contest_in_progress":null,"reported_results":[{"contest_id":"senator","results":[{"candidate":"DEM Sheldon Whitehouse","proportion":0.595,"votes":5367},{"candidate":"REP Robert G. Flanders Jr.","proportion":0.389,"votes":3506},{"candidate":"Write-in","proportion":0.002,"votes":19},{"candidate":"undervote","proportion":0.014,"votes":127},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"rep_1","results":[{"candidate":"DEM David N. Cicilline (13215)","proportion":0.601,"votes":5424},{"candidate":"REP Patrick J. Donovan","proportion":0.379,"votes":3417},{"candidate":"Write-in","proportion":0.001,"votes":13},{"candidate":"undervote","proportion":0.018,"votes":166},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"governor","results":[{"candidate":"DEM Gina M. Raimondo","proportion":0.526,"votes":4749},{"candidate":"MOD William H. Gilbert","proportion":0.028,"votes":256},{"candidate":"REP Allan W. Fung","proportion":0.343,"votes":3094},{"candidate":"Com Anne Armstrong","proportion":0.011,"votes":103},{"candidate":"Ind Luis Daniel Munoz","proportion":0.014,"votes":123},{"candidate":"Ind Joseph A. Trillo","proportion":0.056,"votes":509},{"candidate":"Write-in","proportion":0.004,"votes":32},{"candidate":"undervote","proportion":0.016,"votes":143},{"candidate":"overvote","proportion":0.001,"votes":12}]},{"contest_id":"lieutenant_governor","results":[{"candidate":"DEM Daniel J. McKee","proportion":0.575,"votes":5184},{"candidate":"MOD Joel J. Hellmann","proportion":0.032,"votes":291},{"candidate":"REP Paul E. Pence","proportion":0.273,"votes":2464},{"candidate":"Ind Jonathan J. Riccitelli","proportion":0.028,"votes":251},{"candidate":"Ind Ross K. McCurdy","proportion":0.022,"votes":202},{"candidate":"Write-in","proportion":0.015,"votes":137},{"candidate":"undervote","proportion":0.054,"votes":490},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"secretary_of_state","results":[{"candidate":"DEM Nellie M. Gorbea","proportion":0.651,"votes":5873},{"candidate":"REP Pat V. Cortellessa","proportion":0.306,"votes":2757},{"candidate":"Write-in","proportion":0.001,"votes":10},{"candidate":"undervote","proportion":0.042,"votes":381},{"candidate":"overvote","proportion":0.0,"votes":0}]},{"contest_id":"attorney_general","results":[{"candidate":"DEM Peter F. Neronha","proportion":0.727,"votes":6560},{"candidate":"Com Alan Gordon","proportion":0.163,"votes":1468},{"candidate":"Write-in","proportion":0.006,"votes":51},{"candidate":"undervote","proportion":0.104,"votes":941},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"treasurer","results":[{"candidate":"DEM Seth Magaziner","proportion":0.658,"votes":5932},{"candidate":"REP Michael G. Riley","proportion":0.305,"votes":2751},{"candidate":"Write-in","proportion":0.008,"votes":7},{"candidate":"undervote","proportion":0.037,"votes":330},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_1","results":[{"candidate":"Approve","proportion":0.724,"votes":6534},{"candidate":"Reject","proportion":0.225,"votes":2027},{"candidate":"undervote","proportion":0.051,"votes":459},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_2","results":[{"candidate":"Approve","proportion":0.53,"votes":4779},{"candidate":"Reject","proportion":0.411,"votes":3708},{"candidate":"undervote","proportion":0.059,"votes":533},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_3","results":[{"candidate":"Approve","proportion":0.749,"votes":6753},{"candidate":"Reject","proportion":0.197,"votes":1779},{"candidate":"undervote","proportion":0.054,"votes":489}]}],"seed":null,"total_number_of_ballots":9021}\n')
    matcher.match_responses(expect, real)


def test_post_set_seed():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '12', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/set-seed', data='{"seed":"1"}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"ballot_ids":[560,3619,4412,4643,7290,7908]}\n')
    matcher.match_responses(expect, real)


def test_post_get_audit_state_1():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '0', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-state')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"all_contests":[{"candidates":["DEM Sheldon Whitehouse","REP Robert G. Flanders Jr."],"id":"senator","title":"Senator in Congress"},{"candidates":["DEM David N. Cicilline (13215)","REP Patrick J. Donovan"],"id":"rep_1","title":"Representative in Congress District 1 (13213)"},{"candidates":["DEM Gina M. Raimondo","MOD William H. Gilbert","REP Allan W. Fung","Com Anne Armstrong","Ind Luis Daniel Munoz","Ind Joseph A. Trillo"],"id":"governor","title":"Governor"},{"candidates":["DEM Daniel J. McKee","MOD Joel J. Hellmann","REP Paul E. Pence","Ind Jonathan J. Riccitelli","Ind Ross K. McCurdy"],"id":"lieutenant_governor","title":"Lieutenant Governor"},{"candidates":["DEM Nellie M. Gorbea","REP Pat V. Cortellessa"],"id":"secretary_of_state","title":"Secretary of State"},{"candidates":["DEM Peter F. Neronha","Com Alan Gordon"],"id":"attorney_general","title":"Attorney General"},{"candidates":["DEM Seth Magaziner","REP Michael G. Riley"],"id":"treasurer","title":"General Treasurer"},{"candidates":["Approve","Reject"],"id":"issue_1","title":"1. RHODE ISLAND SCHOOL BUILDINGS - $250,000,000"},{"candidates":["Approve","Reject"],"id":"issue_2","title":"2. HIGHER EDUCATION FACILITIES - $70,000,000"},{"candidates":["Approve","Reject"],"id":"issue_3","title":"3. GREEN ECONOMY AND CLEAN WATER - $47,300,000"}],"all_interpretations":[],"audit_name":"comparison-zerotest-2","audit_type_name":"ballot_comparison","ballot_ids":[560,3619,4412,4643,7290,7908],"ballot_manifest":[{"batch_id":"0201-A-1","box_letter":"A","first_imprinted_id":237000001,"folder_num":"1","last_imprinted_id":237000297,"municipality":"Bristol","num_sheets":297,"precinct_num":"0201"},{"batch_id":"0201-A-2","box_letter":"A","first_imprinted_id":237000298,"folder_num":"2","last_imprinted_id":237000397,"municipality":"Bristol","num_sheets":100,"precinct_num":"0201"},{"batch_id":"0201-A-3","box_letter":"A","first_imprinted_id":237000398,"folder_num":"3","last_imprinted_id":237000496,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-4","box_letter":"A","first_imprinted_id":237000497,"folder_num":"4","last_imprinted_id":237000595,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-5","box_letter":"A","first_imprinted_id":237000596,"folder_num":"5","last_imprinted_id":237000695,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-6","box_letter":"A","first_imprinted_id":237000696,"folder_num":"6","last_imprinted_id":237000794,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-7","box_letter":"A","first_imprinted_id":237000795,"folder_num":"7","last_imprinted_id":237000848,"municipality":"Bristol","num_sheets":54,"precinct_num":"0201"},{"batch_id":"0202-B-1","box_letter":"B","first_imprinted_id":237000849,"folder_num":"1","last_imprinted_id":237001047,"municipality":"Bristol","num_sheets":198,"precinct_num":"0202"},{"batch_id":"0202-B-2","box_letter":"B","first_imprinted_id":237001048,"folder_num":"2","last_imprinted_id":237001247,"municipality":"Bristol","num_sheets":199,"precinct_num":"0202"},{"batch_id":"0202-B-3","box_letter":"B","first_imprinted_id":237001248,"folder_num":"3","last_imprinted_id":237001348,"municipality":"Bristol","num_sheets":101,"precinct_num":"0202"},{"batch_id":"0203-C-1","box_letter":"C","first_imprinted_id":237001349,"folder_num":"1","last_imprinted_id":237001546,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-2","box_letter":"C","first_imprinted_id":237001547,"folder_num":"2","last_imprinted_id":237001744,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-3","box_letter":"C","first_imprinted_id":237001745,"folder_num":"3","last_imprinted_id":237001942,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-4","box_letter":"C","first_imprinted_id":237001943,"folder_num":"4","last_imprinted_id":237002140,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-5","box_letter":"C","first_imprinted_id":237002141,"folder_num":"5","last_imprinted_id":237002338,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-6","box_letter":"C","first_imprinted_id":237002339,"folder_num":"6","last_imprinted_id":237002535,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-7","box_letter":"C","first_imprinted_id":237002536,"folder_num":"7","last_imprinted_id":237002732,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-8","box_letter":"C","first_imprinted_id":237002733,"folder_num":"8","last_imprinted_id":237002929,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-9","box_letter":"C","first_imprinted_id":237002930,"folder_num":"9","last_imprinted_id":237003047,"municipality":"Bristol","num_sheets":118,"precinct_num":"0203"},{"batch_id":"0204-D-1","box_letter":"D","first_imprinted_id":237003048,"folder_num":"1","last_imprinted_id":237003245,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-2","box_letter":"D","first_imprinted_id":237003246,"folder_num":"2","last_imprinted_id":237003443,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-3","box_letter":"D","first_imprinted_id":237003444,"folder_num":"3","last_imprinted_id":237003642,"municipality":"Bristol","num_sheets":199,"precinct_num":"0204"},{"batch_id":"0204-D-4","box_letter":"D","first_imprinted_id":237003643,"folder_num":"4","last_imprinted_id":237003840,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-5","box_letter":"D","first_imprinted_id":237003942,"folder_num":"5","last_imprinted_id":237004139,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-6","box_letter":"D","first_imprinted_id":237004140,"folder_num":"6","last_imprinted_id":237004242,"municipality":"Bristol","num_sheets":103,"precinct_num":"0204"},{"batch_id":"0205-E-1","box_letter":"E","first_imprinted_id":237004243,"folder_num":"1","last_imprinted_id":237004440,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-2","box_letter":"E","first_imprinted_id":237004441,"folder_num":"2","last_imprinted_id":237004640,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0025-E-3","box_letter":"E","first_imprinted_id":237004641,"folder_num":"3","last_imprinted_id":237004837,"municipality":"Bristol","num_sheets":197,"precinct_num":"0025"},{"batch_id":"0205-E-4","box_letter":"E","first_imprinted_id":237004838,"folder_num":"4","last_imprinted_id":237005035,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-5","box_letter":"E","first_imprinted_id":237005091,"folder_num":"5","last_imprinted_id":237005294,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-6","box_letter":"E","first_imprinted_id":237005295,"folder_num":"6","last_imprinted_id":237005512,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-7","box_letter":"E","first_imprinted_id":237005513,"folder_num":"7","last_imprinted_id":237005689,"municipality":"Bristol","num_sheets":177,"precinct_num":"0205"},{"batch_id":"0206-F-1","box_letter":"F","first_imprinted_id":237005690,"folder_num":"1","last_imprinted_id":237005888,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-2","box_letter":"F","first_imprinted_id":237005889,"folder_num":"2","last_imprinted_id":237006086,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-3","box_letter":"F","first_imprinted_id":237006087,"folder_num":"3","last_imprinted_id":237006284,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-4","box_letter":"F","first_imprinted_id":237006285,"folder_num":"4","last_imprinted_id":237006482,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-5","box_letter":"F","first_imprinted_id":237006483,"folder_num":"5","last_imprinted_id":237006682,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-6","box_letter":"F","first_imprinted_id":237006683,"folder_num":"6","last_imprinted_id":237006741,"municipality":"Bristol","num_sheets":59,"precinct_num":"0206"},{"batch_id":"0207-G-1","box_letter":"G","first_imprinted_id":237006743,"folder_num":"1","last_imprinted_id":237006944,"municipality":"Bristol","num_sheets":198,"precinct_num":"0207"},{"batch_id":"0207-G-2","box_letter":"G","first_imprinted_id":237006945,"folder_num":"2","last_imprinted_id":237007141,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-3","box_letter":"G","first_imprinted_id":237007142,"folder_num":"3","last_imprinted_id":237007339,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-4","box_letter":"G","first_imprinted_id":237007538,"folder_num":"4","last_imprinted_id":237007667,"municipality":"Bristol","num_sheets":130,"precinct_num":"0207"},{"batch_id":"0208-H-1","box_letter":"H","first_imprinted_id":237007668,"folder_num":"1","last_imprinted_id":237007890,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-2","box_letter":"H","first_imprinted_id":237007891,"folder_num":"2","last_imprinted_id":237008088,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-3","box_letter":"H","first_imprinted_id":237008089,"folder_num":"3","last_imprinted_id":237008287,"municipality":"Bristol","num_sheets":199,"precinct_num":"0208"},{"batch_id":"0208-H-4","box_letter":"H","first_imprinted_id":237008288,"folder_num":"4","last_imprinted_id":237008466,"municipality":"Bristol","num_sheets":177,"precinct_num":"0208"},{"batch_id":"0208-H-5","box_letter":"H","first_imprinted_id":237008530,"folder_num":"5","last_imprinted_id":237008597,"municipality":"Bristol","num_sheets":68,"precinct_num":"0208"},{"batch_id":"0209-I-1","box_letter":"I","first_imprinted_id":237008598,"folder_num":"1","last_imprinted_id":237008786,"municipality":"Bristol","num_sheets":189,"precinct_num":"0209"},{"batch_id":"0299-J-1","box_letter":"J","first_imprinted_id":237008787,"folder_num":"1","last_imprinted_id":237008991,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-2","box_letter":"J","first_imprinted_id":237008992,"folder_num":"2","last_imprinted_id":237009195,"municipality":"Bristol","num_sheets":204,"precinct_num":"0299"},{"batch_id":"0299-J-3","box_letter":"J","first_imprinted_id":237009196,"folder_num":"3","last_imprinted_id":237009396,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-4","box_letter":"J","first_imprinted_id":237009397,"folder_num":"4","last_imprinted_id":237009517,"municipality":"Bristol","num_sheets":118,"precinct_num":"0299"}],"cvr_hash":"test-hash","main_contest_in_progress":null,"reported_results":[{"contest_id":"senator","results":[{"candidate":"DEM Sheldon Whitehouse","proportion":0.595,"votes":5367},{"candidate":"REP Robert G. Flanders Jr.","proportion":0.389,"votes":3506},{"candidate":"Write-in","proportion":0.002,"votes":19},{"candidate":"undervote","proportion":0.014,"votes":127},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"rep_1","results":[{"candidate":"DEM David N. Cicilline (13215)","proportion":0.601,"votes":5424},{"candidate":"REP Patrick J. Donovan","proportion":0.379,"votes":3417},{"candidate":"Write-in","proportion":0.001,"votes":13},{"candidate":"undervote","proportion":0.018,"votes":166},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"governor","results":[{"candidate":"DEM Gina M. Raimondo","proportion":0.526,"votes":4749},{"candidate":"MOD William H. Gilbert","proportion":0.028,"votes":256},{"candidate":"REP Allan W. Fung","proportion":0.343,"votes":3094},{"candidate":"Com Anne Armstrong","proportion":0.011,"votes":103},{"candidate":"Ind Luis Daniel Munoz","proportion":0.014,"votes":123},{"candidate":"Ind Joseph A. Trillo","proportion":0.056,"votes":509},{"candidate":"Write-in","proportion":0.004,"votes":32},{"candidate":"undervote","proportion":0.016,"votes":143},{"candidate":"overvote","proportion":0.001,"votes":12}]},{"contest_id":"lieutenant_governor","results":[{"candidate":"DEM Daniel J. McKee","proportion":0.575,"votes":5184},{"candidate":"MOD Joel J. Hellmann","proportion":0.032,"votes":291},{"candidate":"REP Paul E. Pence","proportion":0.273,"votes":2464},{"candidate":"Ind Jonathan J. Riccitelli","proportion":0.028,"votes":251},{"candidate":"Ind Ross K. McCurdy","proportion":0.022,"votes":202},{"candidate":"Write-in","proportion":0.015,"votes":137},{"candidate":"undervote","proportion":0.054,"votes":490},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"secretary_of_state","results":[{"candidate":"DEM Nellie M. Gorbea","proportion":0.651,"votes":5873},{"candidate":"REP Pat V. Cortellessa","proportion":0.306,"votes":2757},{"candidate":"Write-in","proportion":0.001,"votes":10},{"candidate":"undervote","proportion":0.042,"votes":381},{"candidate":"overvote","proportion":0.0,"votes":0}]},{"contest_id":"attorney_general","results":[{"candidate":"DEM Peter F. Neronha","proportion":0.727,"votes":6560},{"candidate":"Com Alan Gordon","proportion":0.163,"votes":1468},{"candidate":"Write-in","proportion":0.006,"votes":51},{"candidate":"undervote","proportion":0.104,"votes":941},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"treasurer","results":[{"candidate":"DEM Seth Magaziner","proportion":0.658,"votes":5932},{"candidate":"REP Michael G. Riley","proportion":0.305,"votes":2751},{"candidate":"Write-in","proportion":0.008,"votes":7},{"candidate":"undervote","proportion":0.037,"votes":330},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_1","results":[{"candidate":"Approve","proportion":0.724,"votes":6534},{"candidate":"Reject","proportion":0.225,"votes":2027},{"candidate":"undervote","proportion":0.051,"votes":459},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_2","results":[{"candidate":"Approve","proportion":0.53,"votes":4779},{"candidate":"Reject","proportion":0.411,"votes":3708},{"candidate":"undervote","proportion":0.059,"votes":533},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_3","results":[{"candidate":"Approve","proportion":0.749,"votes":6753},{"candidate":"Reject","proportion":0.197,"votes":1779},{"candidate":"undervote","proportion":0.054,"votes":489}]}],"seed":"1","total_number_of_ballots":9021}\n')
    matcher.match_responses(expect, real)


def test_post_get_audit_state_2():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '0', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-state')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"all_contests":[{"candidates":["DEM Sheldon Whitehouse","REP Robert G. Flanders Jr."],"id":"senator","title":"Senator in Congress"},{"candidates":["DEM David N. Cicilline (13215)","REP Patrick J. Donovan"],"id":"rep_1","title":"Representative in Congress District 1 (13213)"},{"candidates":["DEM Gina M. Raimondo","MOD William H. Gilbert","REP Allan W. Fung","Com Anne Armstrong","Ind Luis Daniel Munoz","Ind Joseph A. Trillo"],"id":"governor","title":"Governor"},{"candidates":["DEM Daniel J. McKee","MOD Joel J. Hellmann","REP Paul E. Pence","Ind Jonathan J. Riccitelli","Ind Ross K. McCurdy"],"id":"lieutenant_governor","title":"Lieutenant Governor"},{"candidates":["DEM Nellie M. Gorbea","REP Pat V. Cortellessa"],"id":"secretary_of_state","title":"Secretary of State"},{"candidates":["DEM Peter F. Neronha","Com Alan Gordon"],"id":"attorney_general","title":"Attorney General"},{"candidates":["DEM Seth Magaziner","REP Michael G. Riley"],"id":"treasurer","title":"General Treasurer"},{"candidates":["Approve","Reject"],"id":"issue_1","title":"1. RHODE ISLAND SCHOOL BUILDINGS - $250,000,000"},{"candidates":["Approve","Reject"],"id":"issue_2","title":"2. HIGHER EDUCATION FACILITIES - $70,000,000"},{"candidates":["Approve","Reject"],"id":"issue_3","title":"3. GREEN ECONOMY AND CLEAN WATER - $47,300,000"}],"all_interpretations":[],"audit_name":"comparison-zerotest-2","audit_type_name":"ballot_comparison","ballot_ids":[560,3619,4412,4643,7290,7908],"ballot_manifest":[{"batch_id":"0201-A-1","box_letter":"A","first_imprinted_id":237000001,"folder_num":"1","last_imprinted_id":237000297,"municipality":"Bristol","num_sheets":297,"precinct_num":"0201"},{"batch_id":"0201-A-2","box_letter":"A","first_imprinted_id":237000298,"folder_num":"2","last_imprinted_id":237000397,"municipality":"Bristol","num_sheets":100,"precinct_num":"0201"},{"batch_id":"0201-A-3","box_letter":"A","first_imprinted_id":237000398,"folder_num":"3","last_imprinted_id":237000496,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-4","box_letter":"A","first_imprinted_id":237000497,"folder_num":"4","last_imprinted_id":237000595,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-5","box_letter":"A","first_imprinted_id":237000596,"folder_num":"5","last_imprinted_id":237000695,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-6","box_letter":"A","first_imprinted_id":237000696,"folder_num":"6","last_imprinted_id":237000794,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-7","box_letter":"A","first_imprinted_id":237000795,"folder_num":"7","last_imprinted_id":237000848,"municipality":"Bristol","num_sheets":54,"precinct_num":"0201"},{"batch_id":"0202-B-1","box_letter":"B","first_imprinted_id":237000849,"folder_num":"1","last_imprinted_id":237001047,"municipality":"Bristol","num_sheets":198,"precinct_num":"0202"},{"batch_id":"0202-B-2","box_letter":"B","first_imprinted_id":237001048,"folder_num":"2","last_imprinted_id":237001247,"municipality":"Bristol","num_sheets":199,"precinct_num":"0202"},{"batch_id":"0202-B-3","box_letter":"B","first_imprinted_id":237001248,"folder_num":"3","last_imprinted_id":237001348,"municipality":"Bristol","num_sheets":101,"precinct_num":"0202"},{"batch_id":"0203-C-1","box_letter":"C","first_imprinted_id":237001349,"folder_num":"1","last_imprinted_id":237001546,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-2","box_letter":"C","first_imprinted_id":237001547,"folder_num":"2","last_imprinted_id":237001744,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-3","box_letter":"C","first_imprinted_id":237001745,"folder_num":"3","last_imprinted_id":237001942,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-4","box_letter":"C","first_imprinted_id":237001943,"folder_num":"4","last_imprinted_id":237002140,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-5","box_letter":"C","first_imprinted_id":237002141,"folder_num":"5","last_imprinted_id":237002338,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-6","box_letter":"C","first_imprinted_id":237002339,"folder_num":"6","last_imprinted_id":237002535,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-7","box_letter":"C","first_imprinted_id":237002536,"folder_num":"7","last_imprinted_id":237002732,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-8","box_letter":"C","first_imprinted_id":237002733,"folder_num":"8","last_imprinted_id":237002929,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-9","box_letter":"C","first_imprinted_id":237002930,"folder_num":"9","last_imprinted_id":237003047,"municipality":"Bristol","num_sheets":118,"precinct_num":"0203"},{"batch_id":"0204-D-1","box_letter":"D","first_imprinted_id":237003048,"folder_num":"1","last_imprinted_id":237003245,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-2","box_letter":"D","first_imprinted_id":237003246,"folder_num":"2","last_imprinted_id":237003443,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-3","box_letter":"D","first_imprinted_id":237003444,"folder_num":"3","last_imprinted_id":237003642,"municipality":"Bristol","num_sheets":199,"precinct_num":"0204"},{"batch_id":"0204-D-4","box_letter":"D","first_imprinted_id":237003643,"folder_num":"4","last_imprinted_id":237003840,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-5","box_letter":"D","first_imprinted_id":237003942,"folder_num":"5","last_imprinted_id":237004139,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-6","box_letter":"D","first_imprinted_id":237004140,"folder_num":"6","last_imprinted_id":237004242,"municipality":"Bristol","num_sheets":103,"precinct_num":"0204"},{"batch_id":"0205-E-1","box_letter":"E","first_imprinted_id":237004243,"folder_num":"1","last_imprinted_id":237004440,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-2","box_letter":"E","first_imprinted_id":237004441,"folder_num":"2","last_imprinted_id":237004640,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0025-E-3","box_letter":"E","first_imprinted_id":237004641,"folder_num":"3","last_imprinted_id":237004837,"municipality":"Bristol","num_sheets":197,"precinct_num":"0025"},{"batch_id":"0205-E-4","box_letter":"E","first_imprinted_id":237004838,"folder_num":"4","last_imprinted_id":237005035,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-5","box_letter":"E","first_imprinted_id":237005091,"folder_num":"5","last_imprinted_id":237005294,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-6","box_letter":"E","first_imprinted_id":237005295,"folder_num":"6","last_imprinted_id":237005512,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-7","box_letter":"E","first_imprinted_id":237005513,"folder_num":"7","last_imprinted_id":237005689,"municipality":"Bristol","num_sheets":177,"precinct_num":"0205"},{"batch_id":"0206-F-1","box_letter":"F","first_imprinted_id":237005690,"folder_num":"1","last_imprinted_id":237005888,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-2","box_letter":"F","first_imprinted_id":237005889,"folder_num":"2","last_imprinted_id":237006086,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-3","box_letter":"F","first_imprinted_id":237006087,"folder_num":"3","last_imprinted_id":237006284,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-4","box_letter":"F","first_imprinted_id":237006285,"folder_num":"4","last_imprinted_id":237006482,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-5","box_letter":"F","first_imprinted_id":237006483,"folder_num":"5","last_imprinted_id":237006682,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-6","box_letter":"F","first_imprinted_id":237006683,"folder_num":"6","last_imprinted_id":237006741,"municipality":"Bristol","num_sheets":59,"precinct_num":"0206"},{"batch_id":"0207-G-1","box_letter":"G","first_imprinted_id":237006743,"folder_num":"1","last_imprinted_id":237006944,"municipality":"Bristol","num_sheets":198,"precinct_num":"0207"},{"batch_id":"0207-G-2","box_letter":"G","first_imprinted_id":237006945,"folder_num":"2","last_imprinted_id":237007141,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-3","box_letter":"G","first_imprinted_id":237007142,"folder_num":"3","last_imprinted_id":237007339,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-4","box_letter":"G","first_imprinted_id":237007538,"folder_num":"4","last_imprinted_id":237007667,"municipality":"Bristol","num_sheets":130,"precinct_num":"0207"},{"batch_id":"0208-H-1","box_letter":"H","first_imprinted_id":237007668,"folder_num":"1","last_imprinted_id":237007890,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-2","box_letter":"H","first_imprinted_id":237007891,"folder_num":"2","last_imprinted_id":237008088,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-3","box_letter":"H","first_imprinted_id":237008089,"folder_num":"3","last_imprinted_id":237008287,"municipality":"Bristol","num_sheets":199,"precinct_num":"0208"},{"batch_id":"0208-H-4","box_letter":"H","first_imprinted_id":237008288,"folder_num":"4","last_imprinted_id":237008466,"municipality":"Bristol","num_sheets":177,"precinct_num":"0208"},{"batch_id":"0208-H-5","box_letter":"H","first_imprinted_id":237008530,"folder_num":"5","last_imprinted_id":237008597,"municipality":"Bristol","num_sheets":68,"precinct_num":"0208"},{"batch_id":"0209-I-1","box_letter":"I","first_imprinted_id":237008598,"folder_num":"1","last_imprinted_id":237008786,"municipality":"Bristol","num_sheets":189,"precinct_num":"0209"},{"batch_id":"0299-J-1","box_letter":"J","first_imprinted_id":237008787,"folder_num":"1","last_imprinted_id":237008991,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-2","box_letter":"J","first_imprinted_id":237008992,"folder_num":"2","last_imprinted_id":237009195,"municipality":"Bristol","num_sheets":204,"precinct_num":"0299"},{"batch_id":"0299-J-3","box_letter":"J","first_imprinted_id":237009196,"folder_num":"3","last_imprinted_id":237009396,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-4","box_letter":"J","first_imprinted_id":237009397,"folder_num":"4","last_imprinted_id":237009517,"municipality":"Bristol","num_sheets":118,"precinct_num":"0299"}],"cvr_hash":"test-hash","main_contest_in_progress":null,"reported_results":[{"contest_id":"senator","results":[{"candidate":"DEM Sheldon Whitehouse","proportion":0.595,"votes":5367},{"candidate":"REP Robert G. Flanders Jr.","proportion":0.389,"votes":3506},{"candidate":"Write-in","proportion":0.002,"votes":19},{"candidate":"undervote","proportion":0.014,"votes":127},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"rep_1","results":[{"candidate":"DEM David N. Cicilline (13215)","proportion":0.601,"votes":5424},{"candidate":"REP Patrick J. Donovan","proportion":0.379,"votes":3417},{"candidate":"Write-in","proportion":0.001,"votes":13},{"candidate":"undervote","proportion":0.018,"votes":166},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"governor","results":[{"candidate":"DEM Gina M. Raimondo","proportion":0.526,"votes":4749},{"candidate":"MOD William H. Gilbert","proportion":0.028,"votes":256},{"candidate":"REP Allan W. Fung","proportion":0.343,"votes":3094},{"candidate":"Com Anne Armstrong","proportion":0.011,"votes":103},{"candidate":"Ind Luis Daniel Munoz","proportion":0.014,"votes":123},{"candidate":"Ind Joseph A. Trillo","proportion":0.056,"votes":509},{"candidate":"Write-in","proportion":0.004,"votes":32},{"candidate":"undervote","proportion":0.016,"votes":143},{"candidate":"overvote","proportion":0.001,"votes":12}]},{"contest_id":"lieutenant_governor","results":[{"candidate":"DEM Daniel J. McKee","proportion":0.575,"votes":5184},{"candidate":"MOD Joel J. Hellmann","proportion":0.032,"votes":291},{"candidate":"REP Paul E. Pence","proportion":0.273,"votes":2464},{"candidate":"Ind Jonathan J. Riccitelli","proportion":0.028,"votes":251},{"candidate":"Ind Ross K. McCurdy","proportion":0.022,"votes":202},{"candidate":"Write-in","proportion":0.015,"votes":137},{"candidate":"undervote","proportion":0.054,"votes":490},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"secretary_of_state","results":[{"candidate":"DEM Nellie M. Gorbea","proportion":0.651,"votes":5873},{"candidate":"REP Pat V. Cortellessa","proportion":0.306,"votes":2757},{"candidate":"Write-in","proportion":0.001,"votes":10},{"candidate":"undervote","proportion":0.042,"votes":381},{"candidate":"overvote","proportion":0.0,"votes":0}]},{"contest_id":"attorney_general","results":[{"candidate":"DEM Peter F. Neronha","proportion":0.727,"votes":6560},{"candidate":"Com Alan Gordon","proportion":0.163,"votes":1468},{"candidate":"Write-in","proportion":0.006,"votes":51},{"candidate":"undervote","proportion":0.104,"votes":941},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"treasurer","results":[{"candidate":"DEM Seth Magaziner","proportion":0.658,"votes":5932},{"candidate":"REP Michael G. Riley","proportion":0.305,"votes":2751},{"candidate":"Write-in","proportion":0.008,"votes":7},{"candidate":"undervote","proportion":0.037,"votes":330},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_1","results":[{"candidate":"Approve","proportion":0.724,"votes":6534},{"candidate":"Reject","proportion":0.225,"votes":2027},{"candidate":"undervote","proportion":0.051,"votes":459},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_2","results":[{"candidate":"Approve","proportion":0.53,"votes":4779},{"candidate":"Reject","proportion":0.411,"votes":3708},{"candidate":"undervote","proportion":0.059,"votes":533},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_3","results":[{"candidate":"Approve","proportion":0.749,"votes":6753},{"candidate":"Reject","proportion":0.197,"votes":1779},{"candidate":"undervote","proportion":0.054,"votes":489}]}],"seed":"1","total_number_of_ballots":9021}\n')
    matcher.match_responses(expect, real)


def test_post_get_audit_status():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '2', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-status', data='{}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"outcomes":[{"contest_id":"senator","progress":"","status":"In Progress","upset_prob":null},{"contest_id":"rep_1","progress":"","status":"In Progress","upset_prob":null},{"contest_id":"governor","progress":"","status":"In Progress","upset_prob":null},{"contest_id":"lieutenant_governor","progress":"","status":"In Progress","upset_prob":null},{"contest_id":"secretary_of_state","progress":"","status":"In Progress","upset_prob":null},{"contest_id":"attorney_general","progress":"","status":"In Progress","upset_prob":null},{"contest_id":"treasurer","progress":"","status":"In Progress","upset_prob":null},{"contest_id":"issue_1","progress":"","status":"In Progress","upset_prob":null},{"contest_id":"issue_2","progress":"","status":"In Progress","upset_prob":null},{"contest_id":"issue_3","progress":"","status":"In Progress","upset_prob":null}]}\n')
    matcher.match_responses(expect, real)


def test_post_timestamp_event():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '38', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"add_ballot","ballot_id":560}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_1():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '44', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_first_save","ballot_id":560}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_add_interpretation():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '382', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/add-interpretation', data='{"interpretation":{"ballot_id":560,"contests":{"senator":"DEM Sheldon Whitehouse","rep_1":"DEM David N. Cicilline (13215)","governor":"DEM Gina M. Raimondo","lieutenant_governor":"DEM Daniel J. McKee","secretary_of_state":"DEM Nellie M. Gorbea","attorney_general":"DEM Peter F. Neronha","treasurer":"DEM Seth Magaziner","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve"}}}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_2():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '44', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_final_save","ballot_id":560}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_get_audit_state_3():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '0', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-state')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"all_contests":[{"candidates":["DEM Sheldon Whitehouse","REP Robert G. Flanders Jr."],"id":"senator","title":"Senator in Congress"},{"candidates":["DEM David N. Cicilline (13215)","REP Patrick J. Donovan"],"id":"rep_1","title":"Representative in Congress District 1 (13213)"},{"candidates":["DEM Gina M. Raimondo","MOD William H. Gilbert","REP Allan W. Fung","Com Anne Armstrong","Ind Luis Daniel Munoz","Ind Joseph A. Trillo"],"id":"governor","title":"Governor"},{"candidates":["DEM Daniel J. McKee","MOD Joel J. Hellmann","REP Paul E. Pence","Ind Jonathan J. Riccitelli","Ind Ross K. McCurdy"],"id":"lieutenant_governor","title":"Lieutenant Governor"},{"candidates":["DEM Nellie M. Gorbea","REP Pat V. Cortellessa"],"id":"secretary_of_state","title":"Secretary of State"},{"candidates":["DEM Peter F. Neronha","Com Alan Gordon"],"id":"attorney_general","title":"Attorney General"},{"candidates":["DEM Seth Magaziner","REP Michael G. Riley"],"id":"treasurer","title":"General Treasurer"},{"candidates":["Approve","Reject"],"id":"issue_1","title":"1. RHODE ISLAND SCHOOL BUILDINGS - $250,000,000"},{"candidates":["Approve","Reject"],"id":"issue_2","title":"2. HIGHER EDUCATION FACILITIES - $70,000,000"},{"candidates":["Approve","Reject"],"id":"issue_3","title":"3. GREEN ECONOMY AND CLEAN WATER - $47,300,000"}],"all_interpretations":[{"ballot_id":560,"contests":{"attorney_general":"DEM Peter F. Neronha","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"DEM Daniel J. McKee","rep_1":"DEM David N. Cicilline (13215)","secretary_of_state":"DEM Nellie M. Gorbea","senator":"DEM Sheldon Whitehouse","treasurer":"DEM Seth Magaziner"}}],"audit_name":"comparison-zerotest-2","audit_type_name":"ballot_comparison","ballot_ids":[560,3619,4412,4643,7290,7908],"ballot_manifest":[{"batch_id":"0201-A-1","box_letter":"A","first_imprinted_id":237000001,"folder_num":"1","last_imprinted_id":237000297,"municipality":"Bristol","num_sheets":297,"precinct_num":"0201"},{"batch_id":"0201-A-2","box_letter":"A","first_imprinted_id":237000298,"folder_num":"2","last_imprinted_id":237000397,"municipality":"Bristol","num_sheets":100,"precinct_num":"0201"},{"batch_id":"0201-A-3","box_letter":"A","first_imprinted_id":237000398,"folder_num":"3","last_imprinted_id":237000496,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-4","box_letter":"A","first_imprinted_id":237000497,"folder_num":"4","last_imprinted_id":237000595,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-5","box_letter":"A","first_imprinted_id":237000596,"folder_num":"5","last_imprinted_id":237000695,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-6","box_letter":"A","first_imprinted_id":237000696,"folder_num":"6","last_imprinted_id":237000794,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-7","box_letter":"A","first_imprinted_id":237000795,"folder_num":"7","last_imprinted_id":237000848,"municipality":"Bristol","num_sheets":54,"precinct_num":"0201"},{"batch_id":"0202-B-1","box_letter":"B","first_imprinted_id":237000849,"folder_num":"1","last_imprinted_id":237001047,"municipality":"Bristol","num_sheets":198,"precinct_num":"0202"},{"batch_id":"0202-B-2","box_letter":"B","first_imprinted_id":237001048,"folder_num":"2","last_imprinted_id":237001247,"municipality":"Bristol","num_sheets":199,"precinct_num":"0202"},{"batch_id":"0202-B-3","box_letter":"B","first_imprinted_id":237001248,"folder_num":"3","last_imprinted_id":237001348,"municipality":"Bristol","num_sheets":101,"precinct_num":"0202"},{"batch_id":"0203-C-1","box_letter":"C","first_imprinted_id":237001349,"folder_num":"1","last_imprinted_id":237001546,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-2","box_letter":"C","first_imprinted_id":237001547,"folder_num":"2","last_imprinted_id":237001744,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-3","box_letter":"C","first_imprinted_id":237001745,"folder_num":"3","last_imprinted_id":237001942,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-4","box_letter":"C","first_imprinted_id":237001943,"folder_num":"4","last_imprinted_id":237002140,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-5","box_letter":"C","first_imprinted_id":237002141,"folder_num":"5","last_imprinted_id":237002338,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-6","box_letter":"C","first_imprinted_id":237002339,"folder_num":"6","last_imprinted_id":237002535,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-7","box_letter":"C","first_imprinted_id":237002536,"folder_num":"7","last_imprinted_id":237002732,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-8","box_letter":"C","first_imprinted_id":237002733,"folder_num":"8","last_imprinted_id":237002929,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-9","box_letter":"C","first_imprinted_id":237002930,"folder_num":"9","last_imprinted_id":237003047,"municipality":"Bristol","num_sheets":118,"precinct_num":"0203"},{"batch_id":"0204-D-1","box_letter":"D","first_imprinted_id":237003048,"folder_num":"1","last_imprinted_id":237003245,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-2","box_letter":"D","first_imprinted_id":237003246,"folder_num":"2","last_imprinted_id":237003443,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-3","box_letter":"D","first_imprinted_id":237003444,"folder_num":"3","last_imprinted_id":237003642,"municipality":"Bristol","num_sheets":199,"precinct_num":"0204"},{"batch_id":"0204-D-4","box_letter":"D","first_imprinted_id":237003643,"folder_num":"4","last_imprinted_id":237003840,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-5","box_letter":"D","first_imprinted_id":237003942,"folder_num":"5","last_imprinted_id":237004139,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-6","box_letter":"D","first_imprinted_id":237004140,"folder_num":"6","last_imprinted_id":237004242,"municipality":"Bristol","num_sheets":103,"precinct_num":"0204"},{"batch_id":"0205-E-1","box_letter":"E","first_imprinted_id":237004243,"folder_num":"1","last_imprinted_id":237004440,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-2","box_letter":"E","first_imprinted_id":237004441,"folder_num":"2","last_imprinted_id":237004640,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0025-E-3","box_letter":"E","first_imprinted_id":237004641,"folder_num":"3","last_imprinted_id":237004837,"municipality":"Bristol","num_sheets":197,"precinct_num":"0025"},{"batch_id":"0205-E-4","box_letter":"E","first_imprinted_id":237004838,"folder_num":"4","last_imprinted_id":237005035,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-5","box_letter":"E","first_imprinted_id":237005091,"folder_num":"5","last_imprinted_id":237005294,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-6","box_letter":"E","first_imprinted_id":237005295,"folder_num":"6","last_imprinted_id":237005512,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-7","box_letter":"E","first_imprinted_id":237005513,"folder_num":"7","last_imprinted_id":237005689,"municipality":"Bristol","num_sheets":177,"precinct_num":"0205"},{"batch_id":"0206-F-1","box_letter":"F","first_imprinted_id":237005690,"folder_num":"1","last_imprinted_id":237005888,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-2","box_letter":"F","first_imprinted_id":237005889,"folder_num":"2","last_imprinted_id":237006086,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-3","box_letter":"F","first_imprinted_id":237006087,"folder_num":"3","last_imprinted_id":237006284,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-4","box_letter":"F","first_imprinted_id":237006285,"folder_num":"4","last_imprinted_id":237006482,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-5","box_letter":"F","first_imprinted_id":237006483,"folder_num":"5","last_imprinted_id":237006682,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-6","box_letter":"F","first_imprinted_id":237006683,"folder_num":"6","last_imprinted_id":237006741,"municipality":"Bristol","num_sheets":59,"precinct_num":"0206"},{"batch_id":"0207-G-1","box_letter":"G","first_imprinted_id":237006743,"folder_num":"1","last_imprinted_id":237006944,"municipality":"Bristol","num_sheets":198,"precinct_num":"0207"},{"batch_id":"0207-G-2","box_letter":"G","first_imprinted_id":237006945,"folder_num":"2","last_imprinted_id":237007141,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-3","box_letter":"G","first_imprinted_id":237007142,"folder_num":"3","last_imprinted_id":237007339,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-4","box_letter":"G","first_imprinted_id":237007538,"folder_num":"4","last_imprinted_id":237007667,"municipality":"Bristol","num_sheets":130,"precinct_num":"0207"},{"batch_id":"0208-H-1","box_letter":"H","first_imprinted_id":237007668,"folder_num":"1","last_imprinted_id":237007890,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-2","box_letter":"H","first_imprinted_id":237007891,"folder_num":"2","last_imprinted_id":237008088,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-3","box_letter":"H","first_imprinted_id":237008089,"folder_num":"3","last_imprinted_id":237008287,"municipality":"Bristol","num_sheets":199,"precinct_num":"0208"},{"batch_id":"0208-H-4","box_letter":"H","first_imprinted_id":237008288,"folder_num":"4","last_imprinted_id":237008466,"municipality":"Bristol","num_sheets":177,"precinct_num":"0208"},{"batch_id":"0208-H-5","box_letter":"H","first_imprinted_id":237008530,"folder_num":"5","last_imprinted_id":237008597,"municipality":"Bristol","num_sheets":68,"precinct_num":"0208"},{"batch_id":"0209-I-1","box_letter":"I","first_imprinted_id":237008598,"folder_num":"1","last_imprinted_id":237008786,"municipality":"Bristol","num_sheets":189,"precinct_num":"0209"},{"batch_id":"0299-J-1","box_letter":"J","first_imprinted_id":237008787,"folder_num":"1","last_imprinted_id":237008991,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-2","box_letter":"J","first_imprinted_id":237008992,"folder_num":"2","last_imprinted_id":237009195,"municipality":"Bristol","num_sheets":204,"precinct_num":"0299"},{"batch_id":"0299-J-3","box_letter":"J","first_imprinted_id":237009196,"folder_num":"3","last_imprinted_id":237009396,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-4","box_letter":"J","first_imprinted_id":237009397,"folder_num":"4","last_imprinted_id":237009517,"municipality":"Bristol","num_sheets":118,"precinct_num":"0299"}],"cvr_hash":"test-hash","main_contest_in_progress":null,"reported_results":[{"contest_id":"senator","results":[{"candidate":"DEM Sheldon Whitehouse","proportion":0.595,"votes":5367},{"candidate":"REP Robert G. Flanders Jr.","proportion":0.389,"votes":3506},{"candidate":"Write-in","proportion":0.002,"votes":19},{"candidate":"undervote","proportion":0.014,"votes":127},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"rep_1","results":[{"candidate":"DEM David N. Cicilline (13215)","proportion":0.601,"votes":5424},{"candidate":"REP Patrick J. Donovan","proportion":0.379,"votes":3417},{"candidate":"Write-in","proportion":0.001,"votes":13},{"candidate":"undervote","proportion":0.018,"votes":166},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"governor","results":[{"candidate":"DEM Gina M. Raimondo","proportion":0.526,"votes":4749},{"candidate":"MOD William H. Gilbert","proportion":0.028,"votes":256},{"candidate":"REP Allan W. Fung","proportion":0.343,"votes":3094},{"candidate":"Com Anne Armstrong","proportion":0.011,"votes":103},{"candidate":"Ind Luis Daniel Munoz","proportion":0.014,"votes":123},{"candidate":"Ind Joseph A. Trillo","proportion":0.056,"votes":509},{"candidate":"Write-in","proportion":0.004,"votes":32},{"candidate":"undervote","proportion":0.016,"votes":143},{"candidate":"overvote","proportion":0.001,"votes":12}]},{"contest_id":"lieutenant_governor","results":[{"candidate":"DEM Daniel J. McKee","proportion":0.575,"votes":5184},{"candidate":"MOD Joel J. Hellmann","proportion":0.032,"votes":291},{"candidate":"REP Paul E. Pence","proportion":0.273,"votes":2464},{"candidate":"Ind Jonathan J. Riccitelli","proportion":0.028,"votes":251},{"candidate":"Ind Ross K. McCurdy","proportion":0.022,"votes":202},{"candidate":"Write-in","proportion":0.015,"votes":137},{"candidate":"undervote","proportion":0.054,"votes":490},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"secretary_of_state","results":[{"candidate":"DEM Nellie M. Gorbea","proportion":0.651,"votes":5873},{"candidate":"REP Pat V. Cortellessa","proportion":0.306,"votes":2757},{"candidate":"Write-in","proportion":0.001,"votes":10},{"candidate":"undervote","proportion":0.042,"votes":381},{"candidate":"overvote","proportion":0.0,"votes":0}]},{"contest_id":"attorney_general","results":[{"candidate":"DEM Peter F. Neronha","proportion":0.727,"votes":6560},{"candidate":"Com Alan Gordon","proportion":0.163,"votes":1468},{"candidate":"Write-in","proportion":0.006,"votes":51},{"candidate":"undervote","proportion":0.104,"votes":941},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"treasurer","results":[{"candidate":"DEM Seth Magaziner","proportion":0.658,"votes":5932},{"candidate":"REP Michael G. Riley","proportion":0.305,"votes":2751},{"candidate":"Write-in","proportion":0.008,"votes":7},{"candidate":"undervote","proportion":0.037,"votes":330},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_1","results":[{"candidate":"Approve","proportion":0.724,"votes":6534},{"candidate":"Reject","proportion":0.225,"votes":2027},{"candidate":"undervote","proportion":0.051,"votes":459},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_2","results":[{"candidate":"Approve","proportion":0.53,"votes":4779},{"candidate":"Reject","proportion":0.411,"votes":3708},{"candidate":"undervote","proportion":0.059,"votes":533},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_3","results":[{"candidate":"Approve","proportion":0.749,"votes":6753},{"candidate":"Reject","proportion":0.197,"votes":1779},{"candidate":"undervote","proportion":0.054,"votes":489}]}],"seed":"1","total_number_of_ballots":9021}\n')
    matcher.match_responses(expect, real)


def test_post_get_audit_status_1():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '2', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-status', data='{}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"outcomes":[{"contest_id":"senator","progress":"Actual votes for DEM Sheldon Whitehouse reported in CVR for DEM Sheldon Whitehouse: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"rep_1","progress":"Actual votes for DEM David N. Cicilline (13215) reported in CVR for DEM David N. Cicilline (13215): 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"governor","progress":"Actual votes for DEM Gina M. Raimondo reported in CVR for DEM Gina M. Raimondo: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"lieutenant_governor","progress":"Actual votes for DEM Daniel J. McKee reported in CVR for DEM Daniel J. McKee: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"secretary_of_state","progress":"Actual votes for DEM Nellie M. Gorbea reported in CVR for DEM Nellie M. Gorbea: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"attorney_general","progress":"Actual votes for DEM Peter F. Neronha reported in CVR for DEM Peter F. Neronha: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"treasurer","progress":"Actual votes for DEM Seth Magaziner reported in CVR for DEM Seth Magaziner: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_1","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_2","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_3","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null}]}\n')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_3():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '39', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"add_ballot","ballot_id":3619}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_4():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '45', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_first_save","ballot_id":3619}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_add_interpretation_1():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '370', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/add-interpretation', data='{"interpretation":{"ballot_id":3619,"contests":{"senator":"REP Robert G. Flanders Jr.","rep_1":"REP Patrick J. Donovan","governor":"REP Allan W. Fung","lieutenant_governor":"REP Paul E. Pence","secretary_of_state":"REP Pat V. Cortellessa","attorney_general":"Com Alan Gordon","treasurer":"REP Michael G. Riley","issue_1":"Reject","issue_2":"Reject","issue_3":"Reject"}}}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_5():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '45', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_final_save","ballot_id":3619}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_get_audit_state_4():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '0', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-state')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"all_contests":[{"candidates":["DEM Sheldon Whitehouse","REP Robert G. Flanders Jr."],"id":"senator","title":"Senator in Congress"},{"candidates":["DEM David N. Cicilline (13215)","REP Patrick J. Donovan"],"id":"rep_1","title":"Representative in Congress District 1 (13213)"},{"candidates":["DEM Gina M. Raimondo","MOD William H. Gilbert","REP Allan W. Fung","Com Anne Armstrong","Ind Luis Daniel Munoz","Ind Joseph A. Trillo"],"id":"governor","title":"Governor"},{"candidates":["DEM Daniel J. McKee","MOD Joel J. Hellmann","REP Paul E. Pence","Ind Jonathan J. Riccitelli","Ind Ross K. McCurdy"],"id":"lieutenant_governor","title":"Lieutenant Governor"},{"candidates":["DEM Nellie M. Gorbea","REP Pat V. Cortellessa"],"id":"secretary_of_state","title":"Secretary of State"},{"candidates":["DEM Peter F. Neronha","Com Alan Gordon"],"id":"attorney_general","title":"Attorney General"},{"candidates":["DEM Seth Magaziner","REP Michael G. Riley"],"id":"treasurer","title":"General Treasurer"},{"candidates":["Approve","Reject"],"id":"issue_1","title":"1. RHODE ISLAND SCHOOL BUILDINGS - $250,000,000"},{"candidates":["Approve","Reject"],"id":"issue_2","title":"2. HIGHER EDUCATION FACILITIES - $70,000,000"},{"candidates":["Approve","Reject"],"id":"issue_3","title":"3. GREEN ECONOMY AND CLEAN WATER - $47,300,000"}],"all_interpretations":[{"ballot_id":560,"contests":{"attorney_general":"DEM Peter F. Neronha","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"DEM Daniel J. McKee","rep_1":"DEM David N. Cicilline (13215)","secretary_of_state":"DEM Nellie M. Gorbea","senator":"DEM Sheldon Whitehouse","treasurer":"DEM Seth Magaziner"}},{"ballot_id":3619,"contests":{"attorney_general":"Com Alan Gordon","governor":"REP Allan W. Fung","issue_1":"Reject","issue_2":"Reject","issue_3":"Reject","lieutenant_governor":"REP Paul E. Pence","rep_1":"REP Patrick J. Donovan","secretary_of_state":"REP Pat V. Cortellessa","senator":"REP Robert G. Flanders Jr.","treasurer":"REP Michael G. Riley"}}],"audit_name":"comparison-zerotest-2","audit_type_name":"ballot_comparison","ballot_ids":[560,3619,4412,4643,7290,7908],"ballot_manifest":[{"batch_id":"0201-A-1","box_letter":"A","first_imprinted_id":237000001,"folder_num":"1","last_imprinted_id":237000297,"municipality":"Bristol","num_sheets":297,"precinct_num":"0201"},{"batch_id":"0201-A-2","box_letter":"A","first_imprinted_id":237000298,"folder_num":"2","last_imprinted_id":237000397,"municipality":"Bristol","num_sheets":100,"precinct_num":"0201"},{"batch_id":"0201-A-3","box_letter":"A","first_imprinted_id":237000398,"folder_num":"3","last_imprinted_id":237000496,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-4","box_letter":"A","first_imprinted_id":237000497,"folder_num":"4","last_imprinted_id":237000595,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-5","box_letter":"A","first_imprinted_id":237000596,"folder_num":"5","last_imprinted_id":237000695,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-6","box_letter":"A","first_imprinted_id":237000696,"folder_num":"6","last_imprinted_id":237000794,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-7","box_letter":"A","first_imprinted_id":237000795,"folder_num":"7","last_imprinted_id":237000848,"municipality":"Bristol","num_sheets":54,"precinct_num":"0201"},{"batch_id":"0202-B-1","box_letter":"B","first_imprinted_id":237000849,"folder_num":"1","last_imprinted_id":237001047,"municipality":"Bristol","num_sheets":198,"precinct_num":"0202"},{"batch_id":"0202-B-2","box_letter":"B","first_imprinted_id":237001048,"folder_num":"2","last_imprinted_id":237001247,"municipality":"Bristol","num_sheets":199,"precinct_num":"0202"},{"batch_id":"0202-B-3","box_letter":"B","first_imprinted_id":237001248,"folder_num":"3","last_imprinted_id":237001348,"municipality":"Bristol","num_sheets":101,"precinct_num":"0202"},{"batch_id":"0203-C-1","box_letter":"C","first_imprinted_id":237001349,"folder_num":"1","last_imprinted_id":237001546,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-2","box_letter":"C","first_imprinted_id":237001547,"folder_num":"2","last_imprinted_id":237001744,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-3","box_letter":"C","first_imprinted_id":237001745,"folder_num":"3","last_imprinted_id":237001942,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-4","box_letter":"C","first_imprinted_id":237001943,"folder_num":"4","last_imprinted_id":237002140,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-5","box_letter":"C","first_imprinted_id":237002141,"folder_num":"5","last_imprinted_id":237002338,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-6","box_letter":"C","first_imprinted_id":237002339,"folder_num":"6","last_imprinted_id":237002535,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-7","box_letter":"C","first_imprinted_id":237002536,"folder_num":"7","last_imprinted_id":237002732,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-8","box_letter":"C","first_imprinted_id":237002733,"folder_num":"8","last_imprinted_id":237002929,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-9","box_letter":"C","first_imprinted_id":237002930,"folder_num":"9","last_imprinted_id":237003047,"municipality":"Bristol","num_sheets":118,"precinct_num":"0203"},{"batch_id":"0204-D-1","box_letter":"D","first_imprinted_id":237003048,"folder_num":"1","last_imprinted_id":237003245,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-2","box_letter":"D","first_imprinted_id":237003246,"folder_num":"2","last_imprinted_id":237003443,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-3","box_letter":"D","first_imprinted_id":237003444,"folder_num":"3","last_imprinted_id":237003642,"municipality":"Bristol","num_sheets":199,"precinct_num":"0204"},{"batch_id":"0204-D-4","box_letter":"D","first_imprinted_id":237003643,"folder_num":"4","last_imprinted_id":237003840,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-5","box_letter":"D","first_imprinted_id":237003942,"folder_num":"5","last_imprinted_id":237004139,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-6","box_letter":"D","first_imprinted_id":237004140,"folder_num":"6","last_imprinted_id":237004242,"municipality":"Bristol","num_sheets":103,"precinct_num":"0204"},{"batch_id":"0205-E-1","box_letter":"E","first_imprinted_id":237004243,"folder_num":"1","last_imprinted_id":237004440,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-2","box_letter":"E","first_imprinted_id":237004441,"folder_num":"2","last_imprinted_id":237004640,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0025-E-3","box_letter":"E","first_imprinted_id":237004641,"folder_num":"3","last_imprinted_id":237004837,"municipality":"Bristol","num_sheets":197,"precinct_num":"0025"},{"batch_id":"0205-E-4","box_letter":"E","first_imprinted_id":237004838,"folder_num":"4","last_imprinted_id":237005035,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-5","box_letter":"E","first_imprinted_id":237005091,"folder_num":"5","last_imprinted_id":237005294,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-6","box_letter":"E","first_imprinted_id":237005295,"folder_num":"6","last_imprinted_id":237005512,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-7","box_letter":"E","first_imprinted_id":237005513,"folder_num":"7","last_imprinted_id":237005689,"municipality":"Bristol","num_sheets":177,"precinct_num":"0205"},{"batch_id":"0206-F-1","box_letter":"F","first_imprinted_id":237005690,"folder_num":"1","last_imprinted_id":237005888,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-2","box_letter":"F","first_imprinted_id":237005889,"folder_num":"2","last_imprinted_id":237006086,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-3","box_letter":"F","first_imprinted_id":237006087,"folder_num":"3","last_imprinted_id":237006284,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-4","box_letter":"F","first_imprinted_id":237006285,"folder_num":"4","last_imprinted_id":237006482,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-5","box_letter":"F","first_imprinted_id":237006483,"folder_num":"5","last_imprinted_id":237006682,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-6","box_letter":"F","first_imprinted_id":237006683,"folder_num":"6","last_imprinted_id":237006741,"municipality":"Bristol","num_sheets":59,"precinct_num":"0206"},{"batch_id":"0207-G-1","box_letter":"G","first_imprinted_id":237006743,"folder_num":"1","last_imprinted_id":237006944,"municipality":"Bristol","num_sheets":198,"precinct_num":"0207"},{"batch_id":"0207-G-2","box_letter":"G","first_imprinted_id":237006945,"folder_num":"2","last_imprinted_id":237007141,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-3","box_letter":"G","first_imprinted_id":237007142,"folder_num":"3","last_imprinted_id":237007339,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-4","box_letter":"G","first_imprinted_id":237007538,"folder_num":"4","last_imprinted_id":237007667,"municipality":"Bristol","num_sheets":130,"precinct_num":"0207"},{"batch_id":"0208-H-1","box_letter":"H","first_imprinted_id":237007668,"folder_num":"1","last_imprinted_id":237007890,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-2","box_letter":"H","first_imprinted_id":237007891,"folder_num":"2","last_imprinted_id":237008088,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-3","box_letter":"H","first_imprinted_id":237008089,"folder_num":"3","last_imprinted_id":237008287,"municipality":"Bristol","num_sheets":199,"precinct_num":"0208"},{"batch_id":"0208-H-4","box_letter":"H","first_imprinted_id":237008288,"folder_num":"4","last_imprinted_id":237008466,"municipality":"Bristol","num_sheets":177,"precinct_num":"0208"},{"batch_id":"0208-H-5","box_letter":"H","first_imprinted_id":237008530,"folder_num":"5","last_imprinted_id":237008597,"municipality":"Bristol","num_sheets":68,"precinct_num":"0208"},{"batch_id":"0209-I-1","box_letter":"I","first_imprinted_id":237008598,"folder_num":"1","last_imprinted_id":237008786,"municipality":"Bristol","num_sheets":189,"precinct_num":"0209"},{"batch_id":"0299-J-1","box_letter":"J","first_imprinted_id":237008787,"folder_num":"1","last_imprinted_id":237008991,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-2","box_letter":"J","first_imprinted_id":237008992,"folder_num":"2","last_imprinted_id":237009195,"municipality":"Bristol","num_sheets":204,"precinct_num":"0299"},{"batch_id":"0299-J-3","box_letter":"J","first_imprinted_id":237009196,"folder_num":"3","last_imprinted_id":237009396,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-4","box_letter":"J","first_imprinted_id":237009397,"folder_num":"4","last_imprinted_id":237009517,"municipality":"Bristol","num_sheets":118,"precinct_num":"0299"}],"cvr_hash":"test-hash","main_contest_in_progress":null,"reported_results":[{"contest_id":"senator","results":[{"candidate":"DEM Sheldon Whitehouse","proportion":0.595,"votes":5367},{"candidate":"REP Robert G. Flanders Jr.","proportion":0.389,"votes":3506},{"candidate":"Write-in","proportion":0.002,"votes":19},{"candidate":"undervote","proportion":0.014,"votes":127},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"rep_1","results":[{"candidate":"DEM David N. Cicilline (13215)","proportion":0.601,"votes":5424},{"candidate":"REP Patrick J. Donovan","proportion":0.379,"votes":3417},{"candidate":"Write-in","proportion":0.001,"votes":13},{"candidate":"undervote","proportion":0.018,"votes":166},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"governor","results":[{"candidate":"DEM Gina M. Raimondo","proportion":0.526,"votes":4749},{"candidate":"MOD William H. Gilbert","proportion":0.028,"votes":256},{"candidate":"REP Allan W. Fung","proportion":0.343,"votes":3094},{"candidate":"Com Anne Armstrong","proportion":0.011,"votes":103},{"candidate":"Ind Luis Daniel Munoz","proportion":0.014,"votes":123},{"candidate":"Ind Joseph A. Trillo","proportion":0.056,"votes":509},{"candidate":"Write-in","proportion":0.004,"votes":32},{"candidate":"undervote","proportion":0.016,"votes":143},{"candidate":"overvote","proportion":0.001,"votes":12}]},{"contest_id":"lieutenant_governor","results":[{"candidate":"DEM Daniel J. McKee","proportion":0.575,"votes":5184},{"candidate":"MOD Joel J. Hellmann","proportion":0.032,"votes":291},{"candidate":"REP Paul E. Pence","proportion":0.273,"votes":2464},{"candidate":"Ind Jonathan J. Riccitelli","proportion":0.028,"votes":251},{"candidate":"Ind Ross K. McCurdy","proportion":0.022,"votes":202},{"candidate":"Write-in","proportion":0.015,"votes":137},{"candidate":"undervote","proportion":0.054,"votes":490},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"secretary_of_state","results":[{"candidate":"DEM Nellie M. Gorbea","proportion":0.651,"votes":5873},{"candidate":"REP Pat V. Cortellessa","proportion":0.306,"votes":2757},{"candidate":"Write-in","proportion":0.001,"votes":10},{"candidate":"undervote","proportion":0.042,"votes":381},{"candidate":"overvote","proportion":0.0,"votes":0}]},{"contest_id":"attorney_general","results":[{"candidate":"DEM Peter F. Neronha","proportion":0.727,"votes":6560},{"candidate":"Com Alan Gordon","proportion":0.163,"votes":1468},{"candidate":"Write-in","proportion":0.006,"votes":51},{"candidate":"undervote","proportion":0.104,"votes":941},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"treasurer","results":[{"candidate":"DEM Seth Magaziner","proportion":0.658,"votes":5932},{"candidate":"REP Michael G. Riley","proportion":0.305,"votes":2751},{"candidate":"Write-in","proportion":0.008,"votes":7},{"candidate":"undervote","proportion":0.037,"votes":330},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_1","results":[{"candidate":"Approve","proportion":0.724,"votes":6534},{"candidate":"Reject","proportion":0.225,"votes":2027},{"candidate":"undervote","proportion":0.051,"votes":459},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_2","results":[{"candidate":"Approve","proportion":0.53,"votes":4779},{"candidate":"Reject","proportion":0.411,"votes":3708},{"candidate":"undervote","proportion":0.059,"votes":533},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_3","results":[{"candidate":"Approve","proportion":0.749,"votes":6753},{"candidate":"Reject","proportion":0.197,"votes":1779},{"candidate":"undervote","proportion":0.054,"votes":489}]}],"seed":"1","total_number_of_ballots":9021}\n')
    matcher.match_responses(expect, real)


def test_post_get_audit_status_2():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '2', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-status', data='{}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"outcomes":[{"contest_id":"senator","progress":"Actual votes for DEM Sheldon Whitehouse reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for REP Robert G. Flanders Jr. reported in CVR for DEM Sheldon Whitehouse: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"rep_1","progress":"Actual votes for DEM David N. Cicilline (13215) reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for REP Patrick J. Donovan reported in CVR for DEM David N. Cicilline (13215): 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"governor","progress":"Actual votes for DEM Gina M. Raimondo reported in CVR for DEM Gina M. Raimondo: 1 \\nActual votes for REP Allan W. Fung reported in CVR for DEM Gina M. Raimondo: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"lieutenant_governor","progress":"Actual votes for DEM Daniel J. McKee reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for REP Paul E. Pence reported in CVR for DEM Daniel J. McKee: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"secretary_of_state","progress":"Actual votes for DEM Nellie M. Gorbea reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for REP Pat V. Cortellessa reported in CVR for DEM Nellie M. Gorbea: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"attorney_general","progress":"Actual votes for DEM Peter F. Neronha reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for Com Alan Gordon reported in CVR for DEM Peter F. Neronha: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"treasurer","progress":"Actual votes for DEM Seth Magaziner reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for REP Michael G. Riley reported in CVR for DEM Seth Magaziner: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_1","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\nActual votes for Reject reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_2","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\nActual votes for Reject reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_3","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\nActual votes for Reject reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null}]}\n')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_6():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '39', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"add_ballot","ballot_id":4412}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_7():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '45', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_first_save","ballot_id":4412}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_add_interpretation_2():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '320', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/add-interpretation', data='{"interpretation":{"ballot_id":4412,"contests":{"senator":"Write-in","rep_1":"Write-in","governor":"DEM Gina M. Raimondo","lieutenant_governor":"MOD Joel J. Hellmann","secretary_of_state":"Write-in","attorney_general":"Write-in","treasurer":"Write-in","issue_1":"undervote","issue_2":"undervote","issue_3":"undervote"}}}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_8():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '45', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_final_save","ballot_id":4412}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_get_audit_state_5():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '0', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-state')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"all_contests":[{"candidates":["DEM Sheldon Whitehouse","REP Robert G. Flanders Jr."],"id":"senator","title":"Senator in Congress"},{"candidates":["DEM David N. Cicilline (13215)","REP Patrick J. Donovan"],"id":"rep_1","title":"Representative in Congress District 1 (13213)"},{"candidates":["DEM Gina M. Raimondo","MOD William H. Gilbert","REP Allan W. Fung","Com Anne Armstrong","Ind Luis Daniel Munoz","Ind Joseph A. Trillo"],"id":"governor","title":"Governor"},{"candidates":["DEM Daniel J. McKee","MOD Joel J. Hellmann","REP Paul E. Pence","Ind Jonathan J. Riccitelli","Ind Ross K. McCurdy"],"id":"lieutenant_governor","title":"Lieutenant Governor"},{"candidates":["DEM Nellie M. Gorbea","REP Pat V. Cortellessa"],"id":"secretary_of_state","title":"Secretary of State"},{"candidates":["DEM Peter F. Neronha","Com Alan Gordon"],"id":"attorney_general","title":"Attorney General"},{"candidates":["DEM Seth Magaziner","REP Michael G. Riley"],"id":"treasurer","title":"General Treasurer"},{"candidates":["Approve","Reject"],"id":"issue_1","title":"1. RHODE ISLAND SCHOOL BUILDINGS - $250,000,000"},{"candidates":["Approve","Reject"],"id":"issue_2","title":"2. HIGHER EDUCATION FACILITIES - $70,000,000"},{"candidates":["Approve","Reject"],"id":"issue_3","title":"3. GREEN ECONOMY AND CLEAN WATER - $47,300,000"}],"all_interpretations":[{"ballot_id":560,"contests":{"attorney_general":"DEM Peter F. Neronha","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"DEM Daniel J. McKee","rep_1":"DEM David N. Cicilline (13215)","secretary_of_state":"DEM Nellie M. Gorbea","senator":"DEM Sheldon Whitehouse","treasurer":"DEM Seth Magaziner"}},{"ballot_id":3619,"contests":{"attorney_general":"Com Alan Gordon","governor":"REP Allan W. Fung","issue_1":"Reject","issue_2":"Reject","issue_3":"Reject","lieutenant_governor":"REP Paul E. Pence","rep_1":"REP Patrick J. Donovan","secretary_of_state":"REP Pat V. Cortellessa","senator":"REP Robert G. Flanders Jr.","treasurer":"REP Michael G. Riley"}},{"ballot_id":4412,"contests":{"attorney_general":"Write-in","governor":"DEM Gina M. Raimondo","issue_1":"undervote","issue_2":"undervote","issue_3":"undervote","lieutenant_governor":"MOD Joel J. Hellmann","rep_1":"Write-in","secretary_of_state":"Write-in","senator":"Write-in","treasurer":"Write-in"}}],"audit_name":"comparison-zerotest-2","audit_type_name":"ballot_comparison","ballot_ids":[560,3619,4412,4643,7290,7908],"ballot_manifest":[{"batch_id":"0201-A-1","box_letter":"A","first_imprinted_id":237000001,"folder_num":"1","last_imprinted_id":237000297,"municipality":"Bristol","num_sheets":297,"precinct_num":"0201"},{"batch_id":"0201-A-2","box_letter":"A","first_imprinted_id":237000298,"folder_num":"2","last_imprinted_id":237000397,"municipality":"Bristol","num_sheets":100,"precinct_num":"0201"},{"batch_id":"0201-A-3","box_letter":"A","first_imprinted_id":237000398,"folder_num":"3","last_imprinted_id":237000496,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-4","box_letter":"A","first_imprinted_id":237000497,"folder_num":"4","last_imprinted_id":237000595,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-5","box_letter":"A","first_imprinted_id":237000596,"folder_num":"5","last_imprinted_id":237000695,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-6","box_letter":"A","first_imprinted_id":237000696,"folder_num":"6","last_imprinted_id":237000794,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-7","box_letter":"A","first_imprinted_id":237000795,"folder_num":"7","last_imprinted_id":237000848,"municipality":"Bristol","num_sheets":54,"precinct_num":"0201"},{"batch_id":"0202-B-1","box_letter":"B","first_imprinted_id":237000849,"folder_num":"1","last_imprinted_id":237001047,"municipality":"Bristol","num_sheets":198,"precinct_num":"0202"},{"batch_id":"0202-B-2","box_letter":"B","first_imprinted_id":237001048,"folder_num":"2","last_imprinted_id":237001247,"municipality":"Bristol","num_sheets":199,"precinct_num":"0202"},{"batch_id":"0202-B-3","box_letter":"B","first_imprinted_id":237001248,"folder_num":"3","last_imprinted_id":237001348,"municipality":"Bristol","num_sheets":101,"precinct_num":"0202"},{"batch_id":"0203-C-1","box_letter":"C","first_imprinted_id":237001349,"folder_num":"1","last_imprinted_id":237001546,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-2","box_letter":"C","first_imprinted_id":237001547,"folder_num":"2","last_imprinted_id":237001744,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-3","box_letter":"C","first_imprinted_id":237001745,"folder_num":"3","last_imprinted_id":237001942,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-4","box_letter":"C","first_imprinted_id":237001943,"folder_num":"4","last_imprinted_id":237002140,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-5","box_letter":"C","first_imprinted_id":237002141,"folder_num":"5","last_imprinted_id":237002338,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-6","box_letter":"C","first_imprinted_id":237002339,"folder_num":"6","last_imprinted_id":237002535,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-7","box_letter":"C","first_imprinted_id":237002536,"folder_num":"7","last_imprinted_id":237002732,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-8","box_letter":"C","first_imprinted_id":237002733,"folder_num":"8","last_imprinted_id":237002929,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-9","box_letter":"C","first_imprinted_id":237002930,"folder_num":"9","last_imprinted_id":237003047,"municipality":"Bristol","num_sheets":118,"precinct_num":"0203"},{"batch_id":"0204-D-1","box_letter":"D","first_imprinted_id":237003048,"folder_num":"1","last_imprinted_id":237003245,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-2","box_letter":"D","first_imprinted_id":237003246,"folder_num":"2","last_imprinted_id":237003443,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-3","box_letter":"D","first_imprinted_id":237003444,"folder_num":"3","last_imprinted_id":237003642,"municipality":"Bristol","num_sheets":199,"precinct_num":"0204"},{"batch_id":"0204-D-4","box_letter":"D","first_imprinted_id":237003643,"folder_num":"4","last_imprinted_id":237003840,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-5","box_letter":"D","first_imprinted_id":237003942,"folder_num":"5","last_imprinted_id":237004139,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-6","box_letter":"D","first_imprinted_id":237004140,"folder_num":"6","last_imprinted_id":237004242,"municipality":"Bristol","num_sheets":103,"precinct_num":"0204"},{"batch_id":"0205-E-1","box_letter":"E","first_imprinted_id":237004243,"folder_num":"1","last_imprinted_id":237004440,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-2","box_letter":"E","first_imprinted_id":237004441,"folder_num":"2","last_imprinted_id":237004640,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0025-E-3","box_letter":"E","first_imprinted_id":237004641,"folder_num":"3","last_imprinted_id":237004837,"municipality":"Bristol","num_sheets":197,"precinct_num":"0025"},{"batch_id":"0205-E-4","box_letter":"E","first_imprinted_id":237004838,"folder_num":"4","last_imprinted_id":237005035,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-5","box_letter":"E","first_imprinted_id":237005091,"folder_num":"5","last_imprinted_id":237005294,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-6","box_letter":"E","first_imprinted_id":237005295,"folder_num":"6","last_imprinted_id":237005512,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-7","box_letter":"E","first_imprinted_id":237005513,"folder_num":"7","last_imprinted_id":237005689,"municipality":"Bristol","num_sheets":177,"precinct_num":"0205"},{"batch_id":"0206-F-1","box_letter":"F","first_imprinted_id":237005690,"folder_num":"1","last_imprinted_id":237005888,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-2","box_letter":"F","first_imprinted_id":237005889,"folder_num":"2","last_imprinted_id":237006086,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-3","box_letter":"F","first_imprinted_id":237006087,"folder_num":"3","last_imprinted_id":237006284,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-4","box_letter":"F","first_imprinted_id":237006285,"folder_num":"4","last_imprinted_id":237006482,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-5","box_letter":"F","first_imprinted_id":237006483,"folder_num":"5","last_imprinted_id":237006682,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-6","box_letter":"F","first_imprinted_id":237006683,"folder_num":"6","last_imprinted_id":237006741,"municipality":"Bristol","num_sheets":59,"precinct_num":"0206"},{"batch_id":"0207-G-1","box_letter":"G","first_imprinted_id":237006743,"folder_num":"1","last_imprinted_id":237006944,"municipality":"Bristol","num_sheets":198,"precinct_num":"0207"},{"batch_id":"0207-G-2","box_letter":"G","first_imprinted_id":237006945,"folder_num":"2","last_imprinted_id":237007141,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-3","box_letter":"G","first_imprinted_id":237007142,"folder_num":"3","last_imprinted_id":237007339,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-4","box_letter":"G","first_imprinted_id":237007538,"folder_num":"4","last_imprinted_id":237007667,"municipality":"Bristol","num_sheets":130,"precinct_num":"0207"},{"batch_id":"0208-H-1","box_letter":"H","first_imprinted_id":237007668,"folder_num":"1","last_imprinted_id":237007890,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-2","box_letter":"H","first_imprinted_id":237007891,"folder_num":"2","last_imprinted_id":237008088,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-3","box_letter":"H","first_imprinted_id":237008089,"folder_num":"3","last_imprinted_id":237008287,"municipality":"Bristol","num_sheets":199,"precinct_num":"0208"},{"batch_id":"0208-H-4","box_letter":"H","first_imprinted_id":237008288,"folder_num":"4","last_imprinted_id":237008466,"municipality":"Bristol","num_sheets":177,"precinct_num":"0208"},{"batch_id":"0208-H-5","box_letter":"H","first_imprinted_id":237008530,"folder_num":"5","last_imprinted_id":237008597,"municipality":"Bristol","num_sheets":68,"precinct_num":"0208"},{"batch_id":"0209-I-1","box_letter":"I","first_imprinted_id":237008598,"folder_num":"1","last_imprinted_id":237008786,"municipality":"Bristol","num_sheets":189,"precinct_num":"0209"},{"batch_id":"0299-J-1","box_letter":"J","first_imprinted_id":237008787,"folder_num":"1","last_imprinted_id":237008991,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-2","box_letter":"J","first_imprinted_id":237008992,"folder_num":"2","last_imprinted_id":237009195,"municipality":"Bristol","num_sheets":204,"precinct_num":"0299"},{"batch_id":"0299-J-3","box_letter":"J","first_imprinted_id":237009196,"folder_num":"3","last_imprinted_id":237009396,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-4","box_letter":"J","first_imprinted_id":237009397,"folder_num":"4","last_imprinted_id":237009517,"municipality":"Bristol","num_sheets":118,"precinct_num":"0299"}],"cvr_hash":"test-hash","main_contest_in_progress":null,"reported_results":[{"contest_id":"senator","results":[{"candidate":"DEM Sheldon Whitehouse","proportion":0.595,"votes":5367},{"candidate":"REP Robert G. Flanders Jr.","proportion":0.389,"votes":3506},{"candidate":"Write-in","proportion":0.002,"votes":19},{"candidate":"undervote","proportion":0.014,"votes":127},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"rep_1","results":[{"candidate":"DEM David N. Cicilline (13215)","proportion":0.601,"votes":5424},{"candidate":"REP Patrick J. Donovan","proportion":0.379,"votes":3417},{"candidate":"Write-in","proportion":0.001,"votes":13},{"candidate":"undervote","proportion":0.018,"votes":166},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"governor","results":[{"candidate":"DEM Gina M. Raimondo","proportion":0.526,"votes":4749},{"candidate":"MOD William H. Gilbert","proportion":0.028,"votes":256},{"candidate":"REP Allan W. Fung","proportion":0.343,"votes":3094},{"candidate":"Com Anne Armstrong","proportion":0.011,"votes":103},{"candidate":"Ind Luis Daniel Munoz","proportion":0.014,"votes":123},{"candidate":"Ind Joseph A. Trillo","proportion":0.056,"votes":509},{"candidate":"Write-in","proportion":0.004,"votes":32},{"candidate":"undervote","proportion":0.016,"votes":143},{"candidate":"overvote","proportion":0.001,"votes":12}]},{"contest_id":"lieutenant_governor","results":[{"candidate":"DEM Daniel J. McKee","proportion":0.575,"votes":5184},{"candidate":"MOD Joel J. Hellmann","proportion":0.032,"votes":291},{"candidate":"REP Paul E. Pence","proportion":0.273,"votes":2464},{"candidate":"Ind Jonathan J. Riccitelli","proportion":0.028,"votes":251},{"candidate":"Ind Ross K. McCurdy","proportion":0.022,"votes":202},{"candidate":"Write-in","proportion":0.015,"votes":137},{"candidate":"undervote","proportion":0.054,"votes":490},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"secretary_of_state","results":[{"candidate":"DEM Nellie M. Gorbea","proportion":0.651,"votes":5873},{"candidate":"REP Pat V. Cortellessa","proportion":0.306,"votes":2757},{"candidate":"Write-in","proportion":0.001,"votes":10},{"candidate":"undervote","proportion":0.042,"votes":381},{"candidate":"overvote","proportion":0.0,"votes":0}]},{"contest_id":"attorney_general","results":[{"candidate":"DEM Peter F. Neronha","proportion":0.727,"votes":6560},{"candidate":"Com Alan Gordon","proportion":0.163,"votes":1468},{"candidate":"Write-in","proportion":0.006,"votes":51},{"candidate":"undervote","proportion":0.104,"votes":941},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"treasurer","results":[{"candidate":"DEM Seth Magaziner","proportion":0.658,"votes":5932},{"candidate":"REP Michael G. Riley","proportion":0.305,"votes":2751},{"candidate":"Write-in","proportion":0.008,"votes":7},{"candidate":"undervote","proportion":0.037,"votes":330},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_1","results":[{"candidate":"Approve","proportion":0.724,"votes":6534},{"candidate":"Reject","proportion":0.225,"votes":2027},{"candidate":"undervote","proportion":0.051,"votes":459},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_2","results":[{"candidate":"Approve","proportion":0.53,"votes":4779},{"candidate":"Reject","proportion":0.411,"votes":3708},{"candidate":"undervote","proportion":0.059,"votes":533},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_3","results":[{"candidate":"Approve","proportion":0.749,"votes":6753},{"candidate":"Reject","proportion":0.197,"votes":1779},{"candidate":"undervote","proportion":0.054,"votes":489}]}],"seed":"1","total_number_of_ballots":9021}\n')
    matcher.match_responses(expect, real)


def test_post_get_audit_status_3():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '2', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-status', data='{}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"outcomes":[{"contest_id":"senator","progress":"Actual votes for DEM Sheldon Whitehouse reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for REP Robert G. Flanders Jr. reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for Write-in reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for Write-in reported in CVR for DEM Sheldon Whitehouse: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"rep_1","progress":"Actual votes for DEM David N. Cicilline (13215) reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for REP Patrick J. Donovan reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for Write-in reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for Write-in reported in CVR for DEM David N. Cicilline (13215): 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"governor","progress":"Actual votes for DEM Gina M. Raimondo reported in CVR for DEM Gina M. Raimondo: 2 \\nActual votes for REP Allan W. Fung reported in CVR for DEM Gina M. Raimondo: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"lieutenant_governor","progress":"Actual votes for DEM Daniel J. McKee reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for REP Paul E. Pence reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for MOD Joel J. Hellmann reported in CVR for DEM Daniel J. McKee: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"secretary_of_state","progress":"Actual votes for DEM Nellie M. Gorbea reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for REP Pat V. Cortellessa reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for Write-in reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for Write-in reported in CVR for DEM Nellie M. Gorbea: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"attorney_general","progress":"Actual votes for DEM Peter F. Neronha reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for Com Alan Gordon reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for Write-in reported in CVR for Com Alan Gordon: 1 \\nActual votes for Write-in reported in CVR for Com Alan Gordon: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"treasurer","progress":"Actual votes for DEM Seth Magaziner reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for REP Michael G. Riley reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for Write-in reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for Write-in reported in CVR for DEM Seth Magaziner: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_1","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\nActual votes for Reject reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_2","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\nActual votes for Reject reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_3","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\nActual votes for Reject reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null}]}\n')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_9():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '39', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"add_ballot","ballot_id":4643}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_10():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '45', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_first_save","ballot_id":4643}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_add_interpretation_3():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '328', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/add-interpretation', data='{"interpretation":{"ballot_id":4643,"contests":{"senator":"undervote","rep_1":"undervote","governor":"DEM Gina M. Raimondo","lieutenant_governor":"Ind Jonathan J. Riccitelli","secretary_of_state":"undervote","attorney_general":"undervote","treasurer":"undervote","issue_1":"overvote","issue_2":"overvote","issue_3":"overvote"}}}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_11():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '45', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_final_save","ballot_id":4643}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_get_audit_state_6():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '0', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-state')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"all_contests":[{"candidates":["DEM Sheldon Whitehouse","REP Robert G. Flanders Jr."],"id":"senator","title":"Senator in Congress"},{"candidates":["DEM David N. Cicilline (13215)","REP Patrick J. Donovan"],"id":"rep_1","title":"Representative in Congress District 1 (13213)"},{"candidates":["DEM Gina M. Raimondo","MOD William H. Gilbert","REP Allan W. Fung","Com Anne Armstrong","Ind Luis Daniel Munoz","Ind Joseph A. Trillo"],"id":"governor","title":"Governor"},{"candidates":["DEM Daniel J. McKee","MOD Joel J. Hellmann","REP Paul E. Pence","Ind Jonathan J. Riccitelli","Ind Ross K. McCurdy"],"id":"lieutenant_governor","title":"Lieutenant Governor"},{"candidates":["DEM Nellie M. Gorbea","REP Pat V. Cortellessa"],"id":"secretary_of_state","title":"Secretary of State"},{"candidates":["DEM Peter F. Neronha","Com Alan Gordon"],"id":"attorney_general","title":"Attorney General"},{"candidates":["DEM Seth Magaziner","REP Michael G. Riley"],"id":"treasurer","title":"General Treasurer"},{"candidates":["Approve","Reject"],"id":"issue_1","title":"1. RHODE ISLAND SCHOOL BUILDINGS - $250,000,000"},{"candidates":["Approve","Reject"],"id":"issue_2","title":"2. HIGHER EDUCATION FACILITIES - $70,000,000"},{"candidates":["Approve","Reject"],"id":"issue_3","title":"3. GREEN ECONOMY AND CLEAN WATER - $47,300,000"}],"all_interpretations":[{"ballot_id":560,"contests":{"attorney_general":"DEM Peter F. Neronha","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"DEM Daniel J. McKee","rep_1":"DEM David N. Cicilline (13215)","secretary_of_state":"DEM Nellie M. Gorbea","senator":"DEM Sheldon Whitehouse","treasurer":"DEM Seth Magaziner"}},{"ballot_id":3619,"contests":{"attorney_general":"Com Alan Gordon","governor":"REP Allan W. Fung","issue_1":"Reject","issue_2":"Reject","issue_3":"Reject","lieutenant_governor":"REP Paul E. Pence","rep_1":"REP Patrick J. Donovan","secretary_of_state":"REP Pat V. Cortellessa","senator":"REP Robert G. Flanders Jr.","treasurer":"REP Michael G. Riley"}},{"ballot_id":4412,"contests":{"attorney_general":"Write-in","governor":"DEM Gina M. Raimondo","issue_1":"undervote","issue_2":"undervote","issue_3":"undervote","lieutenant_governor":"MOD Joel J. Hellmann","rep_1":"Write-in","secretary_of_state":"Write-in","senator":"Write-in","treasurer":"Write-in"}},{"ballot_id":4643,"contests":{"attorney_general":"undervote","governor":"DEM Gina M. Raimondo","issue_1":"overvote","issue_2":"overvote","issue_3":"overvote","lieutenant_governor":"Ind Jonathan J. Riccitelli","rep_1":"undervote","secretary_of_state":"undervote","senator":"undervote","treasurer":"undervote"}}],"audit_name":"comparison-zerotest-2","audit_type_name":"ballot_comparison","ballot_ids":[560,3619,4412,4643,7290,7908],"ballot_manifest":[{"batch_id":"0201-A-1","box_letter":"A","first_imprinted_id":237000001,"folder_num":"1","last_imprinted_id":237000297,"municipality":"Bristol","num_sheets":297,"precinct_num":"0201"},{"batch_id":"0201-A-2","box_letter":"A","first_imprinted_id":237000298,"folder_num":"2","last_imprinted_id":237000397,"municipality":"Bristol","num_sheets":100,"precinct_num":"0201"},{"batch_id":"0201-A-3","box_letter":"A","first_imprinted_id":237000398,"folder_num":"3","last_imprinted_id":237000496,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-4","box_letter":"A","first_imprinted_id":237000497,"folder_num":"4","last_imprinted_id":237000595,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-5","box_letter":"A","first_imprinted_id":237000596,"folder_num":"5","last_imprinted_id":237000695,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-6","box_letter":"A","first_imprinted_id":237000696,"folder_num":"6","last_imprinted_id":237000794,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-7","box_letter":"A","first_imprinted_id":237000795,"folder_num":"7","last_imprinted_id":237000848,"municipality":"Bristol","num_sheets":54,"precinct_num":"0201"},{"batch_id":"0202-B-1","box_letter":"B","first_imprinted_id":237000849,"folder_num":"1","last_imprinted_id":237001047,"municipality":"Bristol","num_sheets":198,"precinct_num":"0202"},{"batch_id":"0202-B-2","box_letter":"B","first_imprinted_id":237001048,"folder_num":"2","last_imprinted_id":237001247,"municipality":"Bristol","num_sheets":199,"precinct_num":"0202"},{"batch_id":"0202-B-3","box_letter":"B","first_imprinted_id":237001248,"folder_num":"3","last_imprinted_id":237001348,"municipality":"Bristol","num_sheets":101,"precinct_num":"0202"},{"batch_id":"0203-C-1","box_letter":"C","first_imprinted_id":237001349,"folder_num":"1","last_imprinted_id":237001546,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-2","box_letter":"C","first_imprinted_id":237001547,"folder_num":"2","last_imprinted_id":237001744,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-3","box_letter":"C","first_imprinted_id":237001745,"folder_num":"3","last_imprinted_id":237001942,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-4","box_letter":"C","first_imprinted_id":237001943,"folder_num":"4","last_imprinted_id":237002140,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-5","box_letter":"C","first_imprinted_id":237002141,"folder_num":"5","last_imprinted_id":237002338,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-6","box_letter":"C","first_imprinted_id":237002339,"folder_num":"6","last_imprinted_id":237002535,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-7","box_letter":"C","first_imprinted_id":237002536,"folder_num":"7","last_imprinted_id":237002732,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-8","box_letter":"C","first_imprinted_id":237002733,"folder_num":"8","last_imprinted_id":237002929,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-9","box_letter":"C","first_imprinted_id":237002930,"folder_num":"9","last_imprinted_id":237003047,"municipality":"Bristol","num_sheets":118,"precinct_num":"0203"},{"batch_id":"0204-D-1","box_letter":"D","first_imprinted_id":237003048,"folder_num":"1","last_imprinted_id":237003245,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-2","box_letter":"D","first_imprinted_id":237003246,"folder_num":"2","last_imprinted_id":237003443,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-3","box_letter":"D","first_imprinted_id":237003444,"folder_num":"3","last_imprinted_id":237003642,"municipality":"Bristol","num_sheets":199,"precinct_num":"0204"},{"batch_id":"0204-D-4","box_letter":"D","first_imprinted_id":237003643,"folder_num":"4","last_imprinted_id":237003840,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-5","box_letter":"D","first_imprinted_id":237003942,"folder_num":"5","last_imprinted_id":237004139,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-6","box_letter":"D","first_imprinted_id":237004140,"folder_num":"6","last_imprinted_id":237004242,"municipality":"Bristol","num_sheets":103,"precinct_num":"0204"},{"batch_id":"0205-E-1","box_letter":"E","first_imprinted_id":237004243,"folder_num":"1","last_imprinted_id":237004440,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-2","box_letter":"E","first_imprinted_id":237004441,"folder_num":"2","last_imprinted_id":237004640,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0025-E-3","box_letter":"E","first_imprinted_id":237004641,"folder_num":"3","last_imprinted_id":237004837,"municipality":"Bristol","num_sheets":197,"precinct_num":"0025"},{"batch_id":"0205-E-4","box_letter":"E","first_imprinted_id":237004838,"folder_num":"4","last_imprinted_id":237005035,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-5","box_letter":"E","first_imprinted_id":237005091,"folder_num":"5","last_imprinted_id":237005294,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-6","box_letter":"E","first_imprinted_id":237005295,"folder_num":"6","last_imprinted_id":237005512,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-7","box_letter":"E","first_imprinted_id":237005513,"folder_num":"7","last_imprinted_id":237005689,"municipality":"Bristol","num_sheets":177,"precinct_num":"0205"},{"batch_id":"0206-F-1","box_letter":"F","first_imprinted_id":237005690,"folder_num":"1","last_imprinted_id":237005888,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-2","box_letter":"F","first_imprinted_id":237005889,"folder_num":"2","last_imprinted_id":237006086,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-3","box_letter":"F","first_imprinted_id":237006087,"folder_num":"3","last_imprinted_id":237006284,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-4","box_letter":"F","first_imprinted_id":237006285,"folder_num":"4","last_imprinted_id":237006482,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-5","box_letter":"F","first_imprinted_id":237006483,"folder_num":"5","last_imprinted_id":237006682,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-6","box_letter":"F","first_imprinted_id":237006683,"folder_num":"6","last_imprinted_id":237006741,"municipality":"Bristol","num_sheets":59,"precinct_num":"0206"},{"batch_id":"0207-G-1","box_letter":"G","first_imprinted_id":237006743,"folder_num":"1","last_imprinted_id":237006944,"municipality":"Bristol","num_sheets":198,"precinct_num":"0207"},{"batch_id":"0207-G-2","box_letter":"G","first_imprinted_id":237006945,"folder_num":"2","last_imprinted_id":237007141,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-3","box_letter":"G","first_imprinted_id":237007142,"folder_num":"3","last_imprinted_id":237007339,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-4","box_letter":"G","first_imprinted_id":237007538,"folder_num":"4","last_imprinted_id":237007667,"municipality":"Bristol","num_sheets":130,"precinct_num":"0207"},{"batch_id":"0208-H-1","box_letter":"H","first_imprinted_id":237007668,"folder_num":"1","last_imprinted_id":237007890,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-2","box_letter":"H","first_imprinted_id":237007891,"folder_num":"2","last_imprinted_id":237008088,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-3","box_letter":"H","first_imprinted_id":237008089,"folder_num":"3","last_imprinted_id":237008287,"municipality":"Bristol","num_sheets":199,"precinct_num":"0208"},{"batch_id":"0208-H-4","box_letter":"H","first_imprinted_id":237008288,"folder_num":"4","last_imprinted_id":237008466,"municipality":"Bristol","num_sheets":177,"precinct_num":"0208"},{"batch_id":"0208-H-5","box_letter":"H","first_imprinted_id":237008530,"folder_num":"5","last_imprinted_id":237008597,"municipality":"Bristol","num_sheets":68,"precinct_num":"0208"},{"batch_id":"0209-I-1","box_letter":"I","first_imprinted_id":237008598,"folder_num":"1","last_imprinted_id":237008786,"municipality":"Bristol","num_sheets":189,"precinct_num":"0209"},{"batch_id":"0299-J-1","box_letter":"J","first_imprinted_id":237008787,"folder_num":"1","last_imprinted_id":237008991,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-2","box_letter":"J","first_imprinted_id":237008992,"folder_num":"2","last_imprinted_id":237009195,"municipality":"Bristol","num_sheets":204,"precinct_num":"0299"},{"batch_id":"0299-J-3","box_letter":"J","first_imprinted_id":237009196,"folder_num":"3","last_imprinted_id":237009396,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-4","box_letter":"J","first_imprinted_id":237009397,"folder_num":"4","last_imprinted_id":237009517,"municipality":"Bristol","num_sheets":118,"precinct_num":"0299"}],"cvr_hash":"test-hash","main_contest_in_progress":null,"reported_results":[{"contest_id":"senator","results":[{"candidate":"DEM Sheldon Whitehouse","proportion":0.595,"votes":5367},{"candidate":"REP Robert G. Flanders Jr.","proportion":0.389,"votes":3506},{"candidate":"Write-in","proportion":0.002,"votes":19},{"candidate":"undervote","proportion":0.014,"votes":127},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"rep_1","results":[{"candidate":"DEM David N. Cicilline (13215)","proportion":0.601,"votes":5424},{"candidate":"REP Patrick J. Donovan","proportion":0.379,"votes":3417},{"candidate":"Write-in","proportion":0.001,"votes":13},{"candidate":"undervote","proportion":0.018,"votes":166},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"governor","results":[{"candidate":"DEM Gina M. Raimondo","proportion":0.526,"votes":4749},{"candidate":"MOD William H. Gilbert","proportion":0.028,"votes":256},{"candidate":"REP Allan W. Fung","proportion":0.343,"votes":3094},{"candidate":"Com Anne Armstrong","proportion":0.011,"votes":103},{"candidate":"Ind Luis Daniel Munoz","proportion":0.014,"votes":123},{"candidate":"Ind Joseph A. Trillo","proportion":0.056,"votes":509},{"candidate":"Write-in","proportion":0.004,"votes":32},{"candidate":"undervote","proportion":0.016,"votes":143},{"candidate":"overvote","proportion":0.001,"votes":12}]},{"contest_id":"lieutenant_governor","results":[{"candidate":"DEM Daniel J. McKee","proportion":0.575,"votes":5184},{"candidate":"MOD Joel J. Hellmann","proportion":0.032,"votes":291},{"candidate":"REP Paul E. Pence","proportion":0.273,"votes":2464},{"candidate":"Ind Jonathan J. Riccitelli","proportion":0.028,"votes":251},{"candidate":"Ind Ross K. McCurdy","proportion":0.022,"votes":202},{"candidate":"Write-in","proportion":0.015,"votes":137},{"candidate":"undervote","proportion":0.054,"votes":490},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"secretary_of_state","results":[{"candidate":"DEM Nellie M. Gorbea","proportion":0.651,"votes":5873},{"candidate":"REP Pat V. Cortellessa","proportion":0.306,"votes":2757},{"candidate":"Write-in","proportion":0.001,"votes":10},{"candidate":"undervote","proportion":0.042,"votes":381},{"candidate":"overvote","proportion":0.0,"votes":0}]},{"contest_id":"attorney_general","results":[{"candidate":"DEM Peter F. Neronha","proportion":0.727,"votes":6560},{"candidate":"Com Alan Gordon","proportion":0.163,"votes":1468},{"candidate":"Write-in","proportion":0.006,"votes":51},{"candidate":"undervote","proportion":0.104,"votes":941},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"treasurer","results":[{"candidate":"DEM Seth Magaziner","proportion":0.658,"votes":5932},{"candidate":"REP Michael G. Riley","proportion":0.305,"votes":2751},{"candidate":"Write-in","proportion":0.008,"votes":7},{"candidate":"undervote","proportion":0.037,"votes":330},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_1","results":[{"candidate":"Approve","proportion":0.724,"votes":6534},{"candidate":"Reject","proportion":0.225,"votes":2027},{"candidate":"undervote","proportion":0.051,"votes":459},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_2","results":[{"candidate":"Approve","proportion":0.53,"votes":4779},{"candidate":"Reject","proportion":0.411,"votes":3708},{"candidate":"undervote","proportion":0.059,"votes":533},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_3","results":[{"candidate":"Approve","proportion":0.749,"votes":6753},{"candidate":"Reject","proportion":0.197,"votes":1779},{"candidate":"undervote","proportion":0.054,"votes":489}]}],"seed":"1","total_number_of_ballots":9021}\n')
    matcher.match_responses(expect, real)


def test_post_get_audit_status_4():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '2', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-status', data='{}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"outcomes":[{"contest_id":"senator","progress":"Actual votes for DEM Sheldon Whitehouse reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for REP Robert G. Flanders Jr. reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for undervote reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for Write-in reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for undervote reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for Write-in reported in CVR for DEM Sheldon Whitehouse: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"rep_1","progress":"Actual votes for DEM David N. Cicilline (13215) reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for REP Patrick J. Donovan reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for undervote reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for Write-in reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for undervote reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for Write-in reported in CVR for DEM David N. Cicilline (13215): 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"governor","progress":"Actual votes for DEM Gina M. Raimondo reported in CVR for DEM Gina M. Raimondo: 3 \\nActual votes for REP Allan W. Fung reported in CVR for DEM Gina M. Raimondo: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"lieutenant_governor","progress":"Actual votes for DEM Daniel J. McKee reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for REP Paul E. Pence reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for MOD Joel J. Hellmann reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for Ind Jonathan J. Riccitelli reported in CVR for DEM Daniel J. McKee: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"secretary_of_state","progress":"Actual votes for DEM Nellie M. Gorbea reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for REP Pat V. Cortellessa reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for undervote reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for Write-in reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for undervote reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for Write-in reported in CVR for DEM Nellie M. Gorbea: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"attorney_general","progress":"Actual votes for DEM Peter F. Neronha reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for Com Alan Gordon reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for undervote reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for Write-in reported in CVR for Com Alan Gordon: 1 \\nActual votes for undervote reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for Write-in reported in CVR for Com Alan Gordon: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"treasurer","progress":"Actual votes for DEM Seth Magaziner reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for REP Michael G. Riley reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for undervote reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for Write-in reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for undervote reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for Write-in reported in CVR for DEM Seth Magaziner: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_1","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\nActual votes for Reject reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_2","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\nActual votes for Reject reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_3","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\nActual votes for Reject reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null}]}\n')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_12():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '39', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"add_ballot","ballot_id":7290}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_13():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '45', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_first_save","ballot_id":7290}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_14():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '45', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_first_save","ballot_id":7290}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_15():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '45', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_first_save","ballot_id":7290}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_add_interpretation_4():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '313', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/add-interpretation', data='{"interpretation":{"ballot_id":7290,"contests":{"senator":"overvote","rep_1":"overvote","governor":"DEM Gina M. Raimondo","lieutenant_governor":"Ind Ross K. McCurdy","secretary_of_state":"overvote","attorney_general":"overvote","treasurer":"overvote","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve"}}}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_16():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '45', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_final_save","ballot_id":7290}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_get_audit_state_7():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '0', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-state')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"all_contests":[{"candidates":["DEM Sheldon Whitehouse","REP Robert G. Flanders Jr."],"id":"senator","title":"Senator in Congress"},{"candidates":["DEM David N. Cicilline (13215)","REP Patrick J. Donovan"],"id":"rep_1","title":"Representative in Congress District 1 (13213)"},{"candidates":["DEM Gina M. Raimondo","MOD William H. Gilbert","REP Allan W. Fung","Com Anne Armstrong","Ind Luis Daniel Munoz","Ind Joseph A. Trillo"],"id":"governor","title":"Governor"},{"candidates":["DEM Daniel J. McKee","MOD Joel J. Hellmann","REP Paul E. Pence","Ind Jonathan J. Riccitelli","Ind Ross K. McCurdy"],"id":"lieutenant_governor","title":"Lieutenant Governor"},{"candidates":["DEM Nellie M. Gorbea","REP Pat V. Cortellessa"],"id":"secretary_of_state","title":"Secretary of State"},{"candidates":["DEM Peter F. Neronha","Com Alan Gordon"],"id":"attorney_general","title":"Attorney General"},{"candidates":["DEM Seth Magaziner","REP Michael G. Riley"],"id":"treasurer","title":"General Treasurer"},{"candidates":["Approve","Reject"],"id":"issue_1","title":"1. RHODE ISLAND SCHOOL BUILDINGS - $250,000,000"},{"candidates":["Approve","Reject"],"id":"issue_2","title":"2. HIGHER EDUCATION FACILITIES - $70,000,000"},{"candidates":["Approve","Reject"],"id":"issue_3","title":"3. GREEN ECONOMY AND CLEAN WATER - $47,300,000"}],"all_interpretations":[{"ballot_id":560,"contests":{"attorney_general":"DEM Peter F. Neronha","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"DEM Daniel J. McKee","rep_1":"DEM David N. Cicilline (13215)","secretary_of_state":"DEM Nellie M. Gorbea","senator":"DEM Sheldon Whitehouse","treasurer":"DEM Seth Magaziner"}},{"ballot_id":3619,"contests":{"attorney_general":"Com Alan Gordon","governor":"REP Allan W. Fung","issue_1":"Reject","issue_2":"Reject","issue_3":"Reject","lieutenant_governor":"REP Paul E. Pence","rep_1":"REP Patrick J. Donovan","secretary_of_state":"REP Pat V. Cortellessa","senator":"REP Robert G. Flanders Jr.","treasurer":"REP Michael G. Riley"}},{"ballot_id":4412,"contests":{"attorney_general":"Write-in","governor":"DEM Gina M. Raimondo","issue_1":"undervote","issue_2":"undervote","issue_3":"undervote","lieutenant_governor":"MOD Joel J. Hellmann","rep_1":"Write-in","secretary_of_state":"Write-in","senator":"Write-in","treasurer":"Write-in"}},{"ballot_id":4643,"contests":{"attorney_general":"undervote","governor":"DEM Gina M. Raimondo","issue_1":"overvote","issue_2":"overvote","issue_3":"overvote","lieutenant_governor":"Ind Jonathan J. Riccitelli","rep_1":"undervote","secretary_of_state":"undervote","senator":"undervote","treasurer":"undervote"}},{"ballot_id":7290,"contests":{"attorney_general":"overvote","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"Ind Ross K. McCurdy","rep_1":"overvote","secretary_of_state":"overvote","senator":"overvote","treasurer":"overvote"}}],"audit_name":"comparison-zerotest-2","audit_type_name":"ballot_comparison","ballot_ids":[560,3619,4412,4643,7290,7908],"ballot_manifest":[{"batch_id":"0201-A-1","box_letter":"A","first_imprinted_id":237000001,"folder_num":"1","last_imprinted_id":237000297,"municipality":"Bristol","num_sheets":297,"precinct_num":"0201"},{"batch_id":"0201-A-2","box_letter":"A","first_imprinted_id":237000298,"folder_num":"2","last_imprinted_id":237000397,"municipality":"Bristol","num_sheets":100,"precinct_num":"0201"},{"batch_id":"0201-A-3","box_letter":"A","first_imprinted_id":237000398,"folder_num":"3","last_imprinted_id":237000496,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-4","box_letter":"A","first_imprinted_id":237000497,"folder_num":"4","last_imprinted_id":237000595,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-5","box_letter":"A","first_imprinted_id":237000596,"folder_num":"5","last_imprinted_id":237000695,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-6","box_letter":"A","first_imprinted_id":237000696,"folder_num":"6","last_imprinted_id":237000794,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-7","box_letter":"A","first_imprinted_id":237000795,"folder_num":"7","last_imprinted_id":237000848,"municipality":"Bristol","num_sheets":54,"precinct_num":"0201"},{"batch_id":"0202-B-1","box_letter":"B","first_imprinted_id":237000849,"folder_num":"1","last_imprinted_id":237001047,"municipality":"Bristol","num_sheets":198,"precinct_num":"0202"},{"batch_id":"0202-B-2","box_letter":"B","first_imprinted_id":237001048,"folder_num":"2","last_imprinted_id":237001247,"municipality":"Bristol","num_sheets":199,"precinct_num":"0202"},{"batch_id":"0202-B-3","box_letter":"B","first_imprinted_id":237001248,"folder_num":"3","last_imprinted_id":237001348,"municipality":"Bristol","num_sheets":101,"precinct_num":"0202"},{"batch_id":"0203-C-1","box_letter":"C","first_imprinted_id":237001349,"folder_num":"1","last_imprinted_id":237001546,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-2","box_letter":"C","first_imprinted_id":237001547,"folder_num":"2","last_imprinted_id":237001744,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-3","box_letter":"C","first_imprinted_id":237001745,"folder_num":"3","last_imprinted_id":237001942,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-4","box_letter":"C","first_imprinted_id":237001943,"folder_num":"4","last_imprinted_id":237002140,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-5","box_letter":"C","first_imprinted_id":237002141,"folder_num":"5","last_imprinted_id":237002338,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-6","box_letter":"C","first_imprinted_id":237002339,"folder_num":"6","last_imprinted_id":237002535,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-7","box_letter":"C","first_imprinted_id":237002536,"folder_num":"7","last_imprinted_id":237002732,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-8","box_letter":"C","first_imprinted_id":237002733,"folder_num":"8","last_imprinted_id":237002929,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-9","box_letter":"C","first_imprinted_id":237002930,"folder_num":"9","last_imprinted_id":237003047,"municipality":"Bristol","num_sheets":118,"precinct_num":"0203"},{"batch_id":"0204-D-1","box_letter":"D","first_imprinted_id":237003048,"folder_num":"1","last_imprinted_id":237003245,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-2","box_letter":"D","first_imprinted_id":237003246,"folder_num":"2","last_imprinted_id":237003443,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-3","box_letter":"D","first_imprinted_id":237003444,"folder_num":"3","last_imprinted_id":237003642,"municipality":"Bristol","num_sheets":199,"precinct_num":"0204"},{"batch_id":"0204-D-4","box_letter":"D","first_imprinted_id":237003643,"folder_num":"4","last_imprinted_id":237003840,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-5","box_letter":"D","first_imprinted_id":237003942,"folder_num":"5","last_imprinted_id":237004139,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-6","box_letter":"D","first_imprinted_id":237004140,"folder_num":"6","last_imprinted_id":237004242,"municipality":"Bristol","num_sheets":103,"precinct_num":"0204"},{"batch_id":"0205-E-1","box_letter":"E","first_imprinted_id":237004243,"folder_num":"1","last_imprinted_id":237004440,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-2","box_letter":"E","first_imprinted_id":237004441,"folder_num":"2","last_imprinted_id":237004640,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0025-E-3","box_letter":"E","first_imprinted_id":237004641,"folder_num":"3","last_imprinted_id":237004837,"municipality":"Bristol","num_sheets":197,"precinct_num":"0025"},{"batch_id":"0205-E-4","box_letter":"E","first_imprinted_id":237004838,"folder_num":"4","last_imprinted_id":237005035,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-5","box_letter":"E","first_imprinted_id":237005091,"folder_num":"5","last_imprinted_id":237005294,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-6","box_letter":"E","first_imprinted_id":237005295,"folder_num":"6","last_imprinted_id":237005512,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-7","box_letter":"E","first_imprinted_id":237005513,"folder_num":"7","last_imprinted_id":237005689,"municipality":"Bristol","num_sheets":177,"precinct_num":"0205"},{"batch_id":"0206-F-1","box_letter":"F","first_imprinted_id":237005690,"folder_num":"1","last_imprinted_id":237005888,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-2","box_letter":"F","first_imprinted_id":237005889,"folder_num":"2","last_imprinted_id":237006086,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-3","box_letter":"F","first_imprinted_id":237006087,"folder_num":"3","last_imprinted_id":237006284,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-4","box_letter":"F","first_imprinted_id":237006285,"folder_num":"4","last_imprinted_id":237006482,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-5","box_letter":"F","first_imprinted_id":237006483,"folder_num":"5","last_imprinted_id":237006682,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-6","box_letter":"F","first_imprinted_id":237006683,"folder_num":"6","last_imprinted_id":237006741,"municipality":"Bristol","num_sheets":59,"precinct_num":"0206"},{"batch_id":"0207-G-1","box_letter":"G","first_imprinted_id":237006743,"folder_num":"1","last_imprinted_id":237006944,"municipality":"Bristol","num_sheets":198,"precinct_num":"0207"},{"batch_id":"0207-G-2","box_letter":"G","first_imprinted_id":237006945,"folder_num":"2","last_imprinted_id":237007141,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-3","box_letter":"G","first_imprinted_id":237007142,"folder_num":"3","last_imprinted_id":237007339,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-4","box_letter":"G","first_imprinted_id":237007538,"folder_num":"4","last_imprinted_id":237007667,"municipality":"Bristol","num_sheets":130,"precinct_num":"0207"},{"batch_id":"0208-H-1","box_letter":"H","first_imprinted_id":237007668,"folder_num":"1","last_imprinted_id":237007890,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-2","box_letter":"H","first_imprinted_id":237007891,"folder_num":"2","last_imprinted_id":237008088,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-3","box_letter":"H","first_imprinted_id":237008089,"folder_num":"3","last_imprinted_id":237008287,"municipality":"Bristol","num_sheets":199,"precinct_num":"0208"},{"batch_id":"0208-H-4","box_letter":"H","first_imprinted_id":237008288,"folder_num":"4","last_imprinted_id":237008466,"municipality":"Bristol","num_sheets":177,"precinct_num":"0208"},{"batch_id":"0208-H-5","box_letter":"H","first_imprinted_id":237008530,"folder_num":"5","last_imprinted_id":237008597,"municipality":"Bristol","num_sheets":68,"precinct_num":"0208"},{"batch_id":"0209-I-1","box_letter":"I","first_imprinted_id":237008598,"folder_num":"1","last_imprinted_id":237008786,"municipality":"Bristol","num_sheets":189,"precinct_num":"0209"},{"batch_id":"0299-J-1","box_letter":"J","first_imprinted_id":237008787,"folder_num":"1","last_imprinted_id":237008991,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-2","box_letter":"J","first_imprinted_id":237008992,"folder_num":"2","last_imprinted_id":237009195,"municipality":"Bristol","num_sheets":204,"precinct_num":"0299"},{"batch_id":"0299-J-3","box_letter":"J","first_imprinted_id":237009196,"folder_num":"3","last_imprinted_id":237009396,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-4","box_letter":"J","first_imprinted_id":237009397,"folder_num":"4","last_imprinted_id":237009517,"municipality":"Bristol","num_sheets":118,"precinct_num":"0299"}],"cvr_hash":"test-hash","main_contest_in_progress":null,"reported_results":[{"contest_id":"senator","results":[{"candidate":"DEM Sheldon Whitehouse","proportion":0.595,"votes":5367},{"candidate":"REP Robert G. Flanders Jr.","proportion":0.389,"votes":3506},{"candidate":"Write-in","proportion":0.002,"votes":19},{"candidate":"undervote","proportion":0.014,"votes":127},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"rep_1","results":[{"candidate":"DEM David N. Cicilline (13215)","proportion":0.601,"votes":5424},{"candidate":"REP Patrick J. Donovan","proportion":0.379,"votes":3417},{"candidate":"Write-in","proportion":0.001,"votes":13},{"candidate":"undervote","proportion":0.018,"votes":166},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"governor","results":[{"candidate":"DEM Gina M. Raimondo","proportion":0.526,"votes":4749},{"candidate":"MOD William H. Gilbert","proportion":0.028,"votes":256},{"candidate":"REP Allan W. Fung","proportion":0.343,"votes":3094},{"candidate":"Com Anne Armstrong","proportion":0.011,"votes":103},{"candidate":"Ind Luis Daniel Munoz","proportion":0.014,"votes":123},{"candidate":"Ind Joseph A. Trillo","proportion":0.056,"votes":509},{"candidate":"Write-in","proportion":0.004,"votes":32},{"candidate":"undervote","proportion":0.016,"votes":143},{"candidate":"overvote","proportion":0.001,"votes":12}]},{"contest_id":"lieutenant_governor","results":[{"candidate":"DEM Daniel J. McKee","proportion":0.575,"votes":5184},{"candidate":"MOD Joel J. Hellmann","proportion":0.032,"votes":291},{"candidate":"REP Paul E. Pence","proportion":0.273,"votes":2464},{"candidate":"Ind Jonathan J. Riccitelli","proportion":0.028,"votes":251},{"candidate":"Ind Ross K. McCurdy","proportion":0.022,"votes":202},{"candidate":"Write-in","proportion":0.015,"votes":137},{"candidate":"undervote","proportion":0.054,"votes":490},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"secretary_of_state","results":[{"candidate":"DEM Nellie M. Gorbea","proportion":0.651,"votes":5873},{"candidate":"REP Pat V. Cortellessa","proportion":0.306,"votes":2757},{"candidate":"Write-in","proportion":0.001,"votes":10},{"candidate":"undervote","proportion":0.042,"votes":381},{"candidate":"overvote","proportion":0.0,"votes":0}]},{"contest_id":"attorney_general","results":[{"candidate":"DEM Peter F. Neronha","proportion":0.727,"votes":6560},{"candidate":"Com Alan Gordon","proportion":0.163,"votes":1468},{"candidate":"Write-in","proportion":0.006,"votes":51},{"candidate":"undervote","proportion":0.104,"votes":941},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"treasurer","results":[{"candidate":"DEM Seth Magaziner","proportion":0.658,"votes":5932},{"candidate":"REP Michael G. Riley","proportion":0.305,"votes":2751},{"candidate":"Write-in","proportion":0.008,"votes":7},{"candidate":"undervote","proportion":0.037,"votes":330},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_1","results":[{"candidate":"Approve","proportion":0.724,"votes":6534},{"candidate":"Reject","proportion":0.225,"votes":2027},{"candidate":"undervote","proportion":0.051,"votes":459},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_2","results":[{"candidate":"Approve","proportion":0.53,"votes":4779},{"candidate":"Reject","proportion":0.411,"votes":3708},{"candidate":"undervote","proportion":0.059,"votes":533},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_3","results":[{"candidate":"Approve","proportion":0.749,"votes":6753},{"candidate":"Reject","proportion":0.197,"votes":1779},{"candidate":"undervote","proportion":0.054,"votes":489}]}],"seed":"1","total_number_of_ballots":9021}\n')
    matcher.match_responses(expect, real)


def test_post_get_audit_status_5():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '2', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-status', data='{}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"outcomes":[{"contest_id":"senator","progress":"Actual votes for DEM Sheldon Whitehouse reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for REP Robert G. Flanders Jr. reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for undervote reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for Write-in reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for overvote reported in CVR for REP Robert G. Flanders Jr.: 1 \\nActual votes for overvote reported in CVR for REP Robert G. Flanders Jr.: 1 \\nActual votes for undervote reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for Write-in reported in CVR for DEM Sheldon Whitehouse: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"rep_1","progress":"Actual votes for DEM David N. Cicilline (13215) reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for REP Patrick J. Donovan reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for undervote reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for Write-in reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for overvote reported in CVR for REP Patrick J. Donovan: 1 \\nActual votes for overvote reported in CVR for REP Patrick J. Donovan: 1 \\nActual votes for undervote reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for Write-in reported in CVR for DEM David N. Cicilline (13215): 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"governor","progress":"Actual votes for DEM Gina M. Raimondo reported in CVR for DEM Gina M. Raimondo: 3 \\nActual votes for DEM Gina M. Raimondo reported in CVR for REP Allan W. Fung: 1 \\nActual votes for REP Allan W. Fung reported in CVR for DEM Gina M. Raimondo: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"lieutenant_governor","progress":"Actual votes for DEM Daniel J. McKee reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for REP Paul E. Pence reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for MOD Joel J. Hellmann reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for Ind Jonathan J. Riccitelli reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for Ind Ross K. McCurdy reported in CVR for REP Paul E. Pence: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"secretary_of_state","progress":"Actual votes for DEM Nellie M. Gorbea reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for REP Pat V. Cortellessa reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for undervote reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for Write-in reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for overvote reported in CVR for REP Pat V. Cortellessa: 1 \\nActual votes for overvote reported in CVR for REP Pat V. Cortellessa: 1 \\nActual votes for undervote reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for Write-in reported in CVR for DEM Nellie M. Gorbea: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"attorney_general","progress":"Actual votes for DEM Peter F. Neronha reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for Com Alan Gordon reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for undervote reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for Write-in reported in CVR for Com Alan Gordon: 1 \\nActual votes for overvote reported in CVR for Com Alan Gordon: 1 \\nActual votes for overvote reported in CVR for Com Alan Gordon: 1 \\nActual votes for undervote reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for Write-in reported in CVR for Com Alan Gordon: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"treasurer","progress":"Actual votes for DEM Seth Magaziner reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for REP Michael G. Riley reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for undervote reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for Write-in reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for overvote reported in CVR for REP Michael G. Riley: 1 \\nActual votes for overvote reported in CVR for REP Michael G. Riley: 1 \\nActual votes for undervote reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for Write-in reported in CVR for DEM Seth Magaziner: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_1","progress":"Actual votes for Approve reported in CVR for Approve: 2 \\nActual votes for Reject reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_2","progress":"Actual votes for Approve reported in CVR for Approve: 1 \\nActual votes for Approve reported in CVR for Reject: 1 \\nActual votes for Reject reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null},{"contest_id":"issue_3","progress":"Actual votes for Approve reported in CVR for Approve: 2 \\nActual votes for Reject reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\n","status":"In Progress","upset_prob":null}]}\n')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_17():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '39', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"add_ballot","ballot_id":7908}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_18():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '45', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_first_save","ballot_id":7908}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_add_interpretation_5():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '372', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/add-interpretation', data='{"interpretation":{"ballot_id":7908,"contests":{"senator":"DEM Sheldon Whitehouse","rep_1":"DEM David N. Cicilline (13215)","governor":"DEM Gina M. Raimondo","lieutenant_governor":"Write-in","secretary_of_state":"DEM Nellie M. Gorbea","attorney_general":"DEM Peter F. Neronha","treasurer":"DEM Seth Magaziner","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve"}}}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_timestamp_event_19():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '45', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/timestamp-event', data='{"event":"click_final_save","ballot_id":7908}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body='')
    matcher.match_responses(expect, real)


def test_post_get_audit_state_8():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '0', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-state')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"all_contests":[{"candidates":["DEM Sheldon Whitehouse","REP Robert G. Flanders Jr."],"id":"senator","title":"Senator in Congress"},{"candidates":["DEM David N. Cicilline (13215)","REP Patrick J. Donovan"],"id":"rep_1","title":"Representative in Congress District 1 (13213)"},{"candidates":["DEM Gina M. Raimondo","MOD William H. Gilbert","REP Allan W. Fung","Com Anne Armstrong","Ind Luis Daniel Munoz","Ind Joseph A. Trillo"],"id":"governor","title":"Governor"},{"candidates":["DEM Daniel J. McKee","MOD Joel J. Hellmann","REP Paul E. Pence","Ind Jonathan J. Riccitelli","Ind Ross K. McCurdy"],"id":"lieutenant_governor","title":"Lieutenant Governor"},{"candidates":["DEM Nellie M. Gorbea","REP Pat V. Cortellessa"],"id":"secretary_of_state","title":"Secretary of State"},{"candidates":["DEM Peter F. Neronha","Com Alan Gordon"],"id":"attorney_general","title":"Attorney General"},{"candidates":["DEM Seth Magaziner","REP Michael G. Riley"],"id":"treasurer","title":"General Treasurer"},{"candidates":["Approve","Reject"],"id":"issue_1","title":"1. RHODE ISLAND SCHOOL BUILDINGS - $250,000,000"},{"candidates":["Approve","Reject"],"id":"issue_2","title":"2. HIGHER EDUCATION FACILITIES - $70,000,000"},{"candidates":["Approve","Reject"],"id":"issue_3","title":"3. GREEN ECONOMY AND CLEAN WATER - $47,300,000"}],"all_interpretations":[{"ballot_id":560,"contests":{"attorney_general":"DEM Peter F. Neronha","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"DEM Daniel J. McKee","rep_1":"DEM David N. Cicilline (13215)","secretary_of_state":"DEM Nellie M. Gorbea","senator":"DEM Sheldon Whitehouse","treasurer":"DEM Seth Magaziner"}},{"ballot_id":3619,"contests":{"attorney_general":"Com Alan Gordon","governor":"REP Allan W. Fung","issue_1":"Reject","issue_2":"Reject","issue_3":"Reject","lieutenant_governor":"REP Paul E. Pence","rep_1":"REP Patrick J. Donovan","secretary_of_state":"REP Pat V. Cortellessa","senator":"REP Robert G. Flanders Jr.","treasurer":"REP Michael G. Riley"}},{"ballot_id":4412,"contests":{"attorney_general":"Write-in","governor":"DEM Gina M. Raimondo","issue_1":"undervote","issue_2":"undervote","issue_3":"undervote","lieutenant_governor":"MOD Joel J. Hellmann","rep_1":"Write-in","secretary_of_state":"Write-in","senator":"Write-in","treasurer":"Write-in"}},{"ballot_id":4643,"contests":{"attorney_general":"undervote","governor":"DEM Gina M. Raimondo","issue_1":"overvote","issue_2":"overvote","issue_3":"overvote","lieutenant_governor":"Ind Jonathan J. Riccitelli","rep_1":"undervote","secretary_of_state":"undervote","senator":"undervote","treasurer":"undervote"}},{"ballot_id":7290,"contests":{"attorney_general":"overvote","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"Ind Ross K. McCurdy","rep_1":"overvote","secretary_of_state":"overvote","senator":"overvote","treasurer":"overvote"}},{"ballot_id":7908,"contests":{"attorney_general":"DEM Peter F. Neronha","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"Write-in","rep_1":"DEM David N. Cicilline (13215)","secretary_of_state":"DEM Nellie M. Gorbea","senator":"DEM Sheldon Whitehouse","treasurer":"DEM Seth Magaziner"}}],"audit_name":"comparison-zerotest-2","audit_type_name":"ballot_comparison","ballot_ids":[560,3619,4412,4643,7290,7908],"ballot_manifest":[{"batch_id":"0201-A-1","box_letter":"A","first_imprinted_id":237000001,"folder_num":"1","last_imprinted_id":237000297,"municipality":"Bristol","num_sheets":297,"precinct_num":"0201"},{"batch_id":"0201-A-2","box_letter":"A","first_imprinted_id":237000298,"folder_num":"2","last_imprinted_id":237000397,"municipality":"Bristol","num_sheets":100,"precinct_num":"0201"},{"batch_id":"0201-A-3","box_letter":"A","first_imprinted_id":237000398,"folder_num":"3","last_imprinted_id":237000496,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-4","box_letter":"A","first_imprinted_id":237000497,"folder_num":"4","last_imprinted_id":237000595,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-5","box_letter":"A","first_imprinted_id":237000596,"folder_num":"5","last_imprinted_id":237000695,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-6","box_letter":"A","first_imprinted_id":237000696,"folder_num":"6","last_imprinted_id":237000794,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-7","box_letter":"A","first_imprinted_id":237000795,"folder_num":"7","last_imprinted_id":237000848,"municipality":"Bristol","num_sheets":54,"precinct_num":"0201"},{"batch_id":"0202-B-1","box_letter":"B","first_imprinted_id":237000849,"folder_num":"1","last_imprinted_id":237001047,"municipality":"Bristol","num_sheets":198,"precinct_num":"0202"},{"batch_id":"0202-B-2","box_letter":"B","first_imprinted_id":237001048,"folder_num":"2","last_imprinted_id":237001247,"municipality":"Bristol","num_sheets":199,"precinct_num":"0202"},{"batch_id":"0202-B-3","box_letter":"B","first_imprinted_id":237001248,"folder_num":"3","last_imprinted_id":237001348,"municipality":"Bristol","num_sheets":101,"precinct_num":"0202"},{"batch_id":"0203-C-1","box_letter":"C","first_imprinted_id":237001349,"folder_num":"1","last_imprinted_id":237001546,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-2","box_letter":"C","first_imprinted_id":237001547,"folder_num":"2","last_imprinted_id":237001744,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-3","box_letter":"C","first_imprinted_id":237001745,"folder_num":"3","last_imprinted_id":237001942,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-4","box_letter":"C","first_imprinted_id":237001943,"folder_num":"4","last_imprinted_id":237002140,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-5","box_letter":"C","first_imprinted_id":237002141,"folder_num":"5","last_imprinted_id":237002338,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-6","box_letter":"C","first_imprinted_id":237002339,"folder_num":"6","last_imprinted_id":237002535,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-7","box_letter":"C","first_imprinted_id":237002536,"folder_num":"7","last_imprinted_id":237002732,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-8","box_letter":"C","first_imprinted_id":237002733,"folder_num":"8","last_imprinted_id":237002929,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-9","box_letter":"C","first_imprinted_id":237002930,"folder_num":"9","last_imprinted_id":237003047,"municipality":"Bristol","num_sheets":118,"precinct_num":"0203"},{"batch_id":"0204-D-1","box_letter":"D","first_imprinted_id":237003048,"folder_num":"1","last_imprinted_id":237003245,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-2","box_letter":"D","first_imprinted_id":237003246,"folder_num":"2","last_imprinted_id":237003443,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-3","box_letter":"D","first_imprinted_id":237003444,"folder_num":"3","last_imprinted_id":237003642,"municipality":"Bristol","num_sheets":199,"precinct_num":"0204"},{"batch_id":"0204-D-4","box_letter":"D","first_imprinted_id":237003643,"folder_num":"4","last_imprinted_id":237003840,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-5","box_letter":"D","first_imprinted_id":237003942,"folder_num":"5","last_imprinted_id":237004139,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-6","box_letter":"D","first_imprinted_id":237004140,"folder_num":"6","last_imprinted_id":237004242,"municipality":"Bristol","num_sheets":103,"precinct_num":"0204"},{"batch_id":"0205-E-1","box_letter":"E","first_imprinted_id":237004243,"folder_num":"1","last_imprinted_id":237004440,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-2","box_letter":"E","first_imprinted_id":237004441,"folder_num":"2","last_imprinted_id":237004640,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0025-E-3","box_letter":"E","first_imprinted_id":237004641,"folder_num":"3","last_imprinted_id":237004837,"municipality":"Bristol","num_sheets":197,"precinct_num":"0025"},{"batch_id":"0205-E-4","box_letter":"E","first_imprinted_id":237004838,"folder_num":"4","last_imprinted_id":237005035,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-5","box_letter":"E","first_imprinted_id":237005091,"folder_num":"5","last_imprinted_id":237005294,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-6","box_letter":"E","first_imprinted_id":237005295,"folder_num":"6","last_imprinted_id":237005512,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-7","box_letter":"E","first_imprinted_id":237005513,"folder_num":"7","last_imprinted_id":237005689,"municipality":"Bristol","num_sheets":177,"precinct_num":"0205"},{"batch_id":"0206-F-1","box_letter":"F","first_imprinted_id":237005690,"folder_num":"1","last_imprinted_id":237005888,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-2","box_letter":"F","first_imprinted_id":237005889,"folder_num":"2","last_imprinted_id":237006086,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-3","box_letter":"F","first_imprinted_id":237006087,"folder_num":"3","last_imprinted_id":237006284,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-4","box_letter":"F","first_imprinted_id":237006285,"folder_num":"4","last_imprinted_id":237006482,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-5","box_letter":"F","first_imprinted_id":237006483,"folder_num":"5","last_imprinted_id":237006682,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-6","box_letter":"F","first_imprinted_id":237006683,"folder_num":"6","last_imprinted_id":237006741,"municipality":"Bristol","num_sheets":59,"precinct_num":"0206"},{"batch_id":"0207-G-1","box_letter":"G","first_imprinted_id":237006743,"folder_num":"1","last_imprinted_id":237006944,"municipality":"Bristol","num_sheets":198,"precinct_num":"0207"},{"batch_id":"0207-G-2","box_letter":"G","first_imprinted_id":237006945,"folder_num":"2","last_imprinted_id":237007141,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-3","box_letter":"G","first_imprinted_id":237007142,"folder_num":"3","last_imprinted_id":237007339,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-4","box_letter":"G","first_imprinted_id":237007538,"folder_num":"4","last_imprinted_id":237007667,"municipality":"Bristol","num_sheets":130,"precinct_num":"0207"},{"batch_id":"0208-H-1","box_letter":"H","first_imprinted_id":237007668,"folder_num":"1","last_imprinted_id":237007890,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-2","box_letter":"H","first_imprinted_id":237007891,"folder_num":"2","last_imprinted_id":237008088,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-3","box_letter":"H","first_imprinted_id":237008089,"folder_num":"3","last_imprinted_id":237008287,"municipality":"Bristol","num_sheets":199,"precinct_num":"0208"},{"batch_id":"0208-H-4","box_letter":"H","first_imprinted_id":237008288,"folder_num":"4","last_imprinted_id":237008466,"municipality":"Bristol","num_sheets":177,"precinct_num":"0208"},{"batch_id":"0208-H-5","box_letter":"H","first_imprinted_id":237008530,"folder_num":"5","last_imprinted_id":237008597,"municipality":"Bristol","num_sheets":68,"precinct_num":"0208"},{"batch_id":"0209-I-1","box_letter":"I","first_imprinted_id":237008598,"folder_num":"1","last_imprinted_id":237008786,"municipality":"Bristol","num_sheets":189,"precinct_num":"0209"},{"batch_id":"0299-J-1","box_letter":"J","first_imprinted_id":237008787,"folder_num":"1","last_imprinted_id":237008991,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-2","box_letter":"J","first_imprinted_id":237008992,"folder_num":"2","last_imprinted_id":237009195,"municipality":"Bristol","num_sheets":204,"precinct_num":"0299"},{"batch_id":"0299-J-3","box_letter":"J","first_imprinted_id":237009196,"folder_num":"3","last_imprinted_id":237009396,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-4","box_letter":"J","first_imprinted_id":237009397,"folder_num":"4","last_imprinted_id":237009517,"municipality":"Bristol","num_sheets":118,"precinct_num":"0299"}],"cvr_hash":"test-hash","main_contest_in_progress":null,"reported_results":[{"contest_id":"senator","results":[{"candidate":"DEM Sheldon Whitehouse","proportion":0.595,"votes":5367},{"candidate":"REP Robert G. Flanders Jr.","proportion":0.389,"votes":3506},{"candidate":"Write-in","proportion":0.002,"votes":19},{"candidate":"undervote","proportion":0.014,"votes":127},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"rep_1","results":[{"candidate":"DEM David N. Cicilline (13215)","proportion":0.601,"votes":5424},{"candidate":"REP Patrick J. Donovan","proportion":0.379,"votes":3417},{"candidate":"Write-in","proportion":0.001,"votes":13},{"candidate":"undervote","proportion":0.018,"votes":166},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"governor","results":[{"candidate":"DEM Gina M. Raimondo","proportion":0.526,"votes":4749},{"candidate":"MOD William H. Gilbert","proportion":0.028,"votes":256},{"candidate":"REP Allan W. Fung","proportion":0.343,"votes":3094},{"candidate":"Com Anne Armstrong","proportion":0.011,"votes":103},{"candidate":"Ind Luis Daniel Munoz","proportion":0.014,"votes":123},{"candidate":"Ind Joseph A. Trillo","proportion":0.056,"votes":509},{"candidate":"Write-in","proportion":0.004,"votes":32},{"candidate":"undervote","proportion":0.016,"votes":143},{"candidate":"overvote","proportion":0.001,"votes":12}]},{"contest_id":"lieutenant_governor","results":[{"candidate":"DEM Daniel J. McKee","proportion":0.575,"votes":5184},{"candidate":"MOD Joel J. Hellmann","proportion":0.032,"votes":291},{"candidate":"REP Paul E. Pence","proportion":0.273,"votes":2464},{"candidate":"Ind Jonathan J. Riccitelli","proportion":0.028,"votes":251},{"candidate":"Ind Ross K. McCurdy","proportion":0.022,"votes":202},{"candidate":"Write-in","proportion":0.015,"votes":137},{"candidate":"undervote","proportion":0.054,"votes":490},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"secretary_of_state","results":[{"candidate":"DEM Nellie M. Gorbea","proportion":0.651,"votes":5873},{"candidate":"REP Pat V. Cortellessa","proportion":0.306,"votes":2757},{"candidate":"Write-in","proportion":0.001,"votes":10},{"candidate":"undervote","proportion":0.042,"votes":381},{"candidate":"overvote","proportion":0.0,"votes":0}]},{"contest_id":"attorney_general","results":[{"candidate":"DEM Peter F. Neronha","proportion":0.727,"votes":6560},{"candidate":"Com Alan Gordon","proportion":0.163,"votes":1468},{"candidate":"Write-in","proportion":0.006,"votes":51},{"candidate":"undervote","proportion":0.104,"votes":941},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"treasurer","results":[{"candidate":"DEM Seth Magaziner","proportion":0.658,"votes":5932},{"candidate":"REP Michael G. Riley","proportion":0.305,"votes":2751},{"candidate":"Write-in","proportion":0.008,"votes":7},{"candidate":"undervote","proportion":0.037,"votes":330},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_1","results":[{"candidate":"Approve","proportion":0.724,"votes":6534},{"candidate":"Reject","proportion":0.225,"votes":2027},{"candidate":"undervote","proportion":0.051,"votes":459},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_2","results":[{"candidate":"Approve","proportion":0.53,"votes":4779},{"candidate":"Reject","proportion":0.411,"votes":3708},{"candidate":"undervote","proportion":0.059,"votes":533},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_3","results":[{"candidate":"Approve","proportion":0.749,"votes":6753},{"candidate":"Reject","proportion":0.197,"votes":1779},{"candidate":"undervote","proportion":0.054,"votes":489}]}],"seed":"1","total_number_of_ballots":9021}\n')
    matcher.match_responses(expect, real)


def test_post_get_audit_status_6():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '2', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-status', data='{}')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"outcomes":[{"contest_id":"senator","progress":"102 correct \\nballots left; Upset probability=0.36550000000000005 \\nActual votes for DEM Sheldon Whitehouse reported in CVR for DEM Sheldon Whitehouse: 2 \\nActual votes for REP Robert G. Flanders Jr. reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for undervote reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for Write-in reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for overvote reported in CVR for REP Robert G. Flanders Jr.: 1 \\nActual votes for overvote reported in CVR for REP Robert G. Flanders Jr.: 1 \\nActual votes for undervote reported in CVR for DEM Sheldon Whitehouse: 1 \\nActual votes for Write-in reported in CVR for DEM Sheldon Whitehouse: 1 \\n","status":"Done","upset_prob":0.36550000000000005},{"contest_id":"rep_1","progress":"95 correct \\nballots left; Upset probability=0.352 \\nActual votes for DEM David N. Cicilline (13215) reported in CVR for DEM David N. Cicilline (13215): 2 \\nActual votes for REP Patrick J. Donovan reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for undervote reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for Write-in reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for overvote reported in CVR for REP Patrick J. Donovan: 1 \\nActual votes for overvote reported in CVR for REP Patrick J. Donovan: 1 \\nActual votes for undervote reported in CVR for DEM David N. Cicilline (13215): 1 \\nActual votes for Write-in reported in CVR for DEM David N. Cicilline (13215): 1 \\n","status":"Done","upset_prob":0.352},{"contest_id":"governor","progress":"66 correct \\nballots left; Upset probability=0.21999999999999997 \\nActual votes for DEM Gina M. Raimondo reported in CVR for DEM Gina M. Raimondo: 4 \\nActual votes for DEM Gina M. Raimondo reported in CVR for REP Allan W. Fung: 1 \\nActual votes for REP Allan W. Fung reported in CVR for DEM Gina M. Raimondo: 1 \\n","status":"Done","upset_prob":0.21999999999999997},{"contest_id":"lieutenant_governor","progress":"98 correct \\nballots left; Upset probability=0.34109999999999996 \\nActual votes for DEM Daniel J. McKee reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for REP Paul E. Pence reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for MOD Joel J. Hellmann reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for Ind Jonathan J. Riccitelli reported in CVR for DEM Daniel J. McKee: 1 \\nActual votes for Ind Ross K. McCurdy reported in CVR for REP Paul E. Pence: 1 \\nActual votes for Write-in reported in CVR for REP Paul E. Pence: 1 \\nActual votes for Write-in reported in CVR for REP Paul E. Pence: 1 \\n","status":"Done","upset_prob":0.34109999999999996},{"contest_id":"secretary_of_state","progress":"61 correct \\nballots left; Upset probability=0.2609 \\nActual votes for DEM Nellie M. Gorbea reported in CVR for DEM Nellie M. Gorbea: 2 \\nActual votes for REP Pat V. Cortellessa reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for undervote reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for Write-in reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for overvote reported in CVR for REP Pat V. Cortellessa: 1 \\nActual votes for overvote reported in CVR for REP Pat V. Cortellessa: 1 \\nActual votes for undervote reported in CVR for DEM Nellie M. Gorbea: 1 \\nActual votes for Write-in reported in CVR for DEM Nellie M. Gorbea: 1 \\n","status":"Done","upset_prob":0.2609},{"contest_id":"attorney_general","progress":"27 correct \\nballots left; Upset probability=0.1604 \\nActual votes for DEM Peter F. Neronha reported in CVR for DEM Peter F. Neronha: 2 \\nActual votes for Com Alan Gordon reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for undervote reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for Write-in reported in CVR for Com Alan Gordon: 1 \\nActual votes for overvote reported in CVR for Com Alan Gordon: 1 \\nActual votes for overvote reported in CVR for Com Alan Gordon: 1 \\nActual votes for undervote reported in CVR for DEM Peter F. Neronha: 1 \\nActual votes for Write-in reported in CVR for Com Alan Gordon: 1 \\n","status":"Done","upset_prob":0.1604},{"contest_id":"treasurer","progress":"60 correct \\nballots left; Upset probability=0.25649999999999995 \\nActual votes for DEM Seth Magaziner reported in CVR for DEM Seth Magaziner: 2 \\nActual votes for REP Michael G. Riley reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for undervote reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for Write-in reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for overvote reported in CVR for REP Michael G. Riley: 1 \\nActual votes for overvote reported in CVR for REP Michael G. Riley: 1 \\nActual votes for undervote reported in CVR for DEM Seth Magaziner: 1 \\nActual votes for Write-in reported in CVR for DEM Seth Magaziner: 1 \\n","status":"Done","upset_prob":0.25649999999999995},{"contest_id":"issue_1","progress":"30 correct \\nballots left; Upset probability=0.14259999999999995 \\nActual votes for Approve reported in CVR for Approve: 3 \\nActual votes for Reject reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\n","status":"Done","upset_prob":0.14259999999999995},{"contest_id":"issue_2","progress":"125 correct \\nballots left; Upset probability=0.42979999999999996 \\nActual votes for Approve reported in CVR for Approve: 2 \\nActual votes for Approve reported in CVR for Reject: 1 \\nActual votes for Reject reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\n","status":"Done","upset_prob":0.42979999999999996},{"contest_id":"issue_3","progress":"27 correct \\nballots left; Upset probability=0.11450000000000005 \\nActual votes for Approve reported in CVR for Approve: 3 \\nActual votes for Reject reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\nActual votes for overvote reported in CVR for Approve: 1 \\nActual votes for undervote reported in CVR for Approve: 1 \\n","status":"Done","upset_prob":0.11450000000000005}]}\n')
    matcher.match_responses(expect, real)


def test_get_get_audit_state():
    request = Request(scheme='http', method='GET', headers={'Connection': 'keep-alive', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3571=0; gsScrollPos-3123=0'}, host='127.0.0.1:5000', path='/get-audit-state')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"all_contests":[{"candidates":["DEM Sheldon Whitehouse","REP Robert G. Flanders Jr."],"id":"senator","title":"Senator in Congress"},{"candidates":["DEM David N. Cicilline (13215)","REP Patrick J. Donovan"],"id":"rep_1","title":"Representative in Congress District 1 (13213)"},{"candidates":["DEM Gina M. Raimondo","MOD William H. Gilbert","REP Allan W. Fung","Com Anne Armstrong","Ind Luis Daniel Munoz","Ind Joseph A. Trillo"],"id":"governor","title":"Governor"},{"candidates":["DEM Daniel J. McKee","MOD Joel J. Hellmann","REP Paul E. Pence","Ind Jonathan J. Riccitelli","Ind Ross K. McCurdy"],"id":"lieutenant_governor","title":"Lieutenant Governor"},{"candidates":["DEM Nellie M. Gorbea","REP Pat V. Cortellessa"],"id":"secretary_of_state","title":"Secretary of State"},{"candidates":["DEM Peter F. Neronha","Com Alan Gordon"],"id":"attorney_general","title":"Attorney General"},{"candidates":["DEM Seth Magaziner","REP Michael G. Riley"],"id":"treasurer","title":"General Treasurer"},{"candidates":["Approve","Reject"],"id":"issue_1","title":"1. RHODE ISLAND SCHOOL BUILDINGS - $250,000,000"},{"candidates":["Approve","Reject"],"id":"issue_2","title":"2. HIGHER EDUCATION FACILITIES - $70,000,000"},{"candidates":["Approve","Reject"],"id":"issue_3","title":"3. GREEN ECONOMY AND CLEAN WATER - $47,300,000"}],"all_interpretations":[{"ballot_id":560,"contests":{"attorney_general":"DEM Peter F. Neronha","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"DEM Daniel J. McKee","rep_1":"DEM David N. Cicilline (13215)","secretary_of_state":"DEM Nellie M. Gorbea","senator":"DEM Sheldon Whitehouse","treasurer":"DEM Seth Magaziner"}},{"ballot_id":3619,"contests":{"attorney_general":"Com Alan Gordon","governor":"REP Allan W. Fung","issue_1":"Reject","issue_2":"Reject","issue_3":"Reject","lieutenant_governor":"REP Paul E. Pence","rep_1":"REP Patrick J. Donovan","secretary_of_state":"REP Pat V. Cortellessa","senator":"REP Robert G. Flanders Jr.","treasurer":"REP Michael G. Riley"}},{"ballot_id":4412,"contests":{"attorney_general":"Write-in","governor":"DEM Gina M. Raimondo","issue_1":"undervote","issue_2":"undervote","issue_3":"undervote","lieutenant_governor":"MOD Joel J. Hellmann","rep_1":"Write-in","secretary_of_state":"Write-in","senator":"Write-in","treasurer":"Write-in"}},{"ballot_id":4643,"contests":{"attorney_general":"undervote","governor":"DEM Gina M. Raimondo","issue_1":"overvote","issue_2":"overvote","issue_3":"overvote","lieutenant_governor":"Ind Jonathan J. Riccitelli","rep_1":"undervote","secretary_of_state":"undervote","senator":"undervote","treasurer":"undervote"}},{"ballot_id":7290,"contests":{"attorney_general":"overvote","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"Ind Ross K. McCurdy","rep_1":"overvote","secretary_of_state":"overvote","senator":"overvote","treasurer":"overvote"}},{"ballot_id":7908,"contests":{"attorney_general":"DEM Peter F. Neronha","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"Write-in","rep_1":"DEM David N. Cicilline (13215)","secretary_of_state":"DEM Nellie M. Gorbea","senator":"DEM Sheldon Whitehouse","treasurer":"DEM Seth Magaziner"}}],"audit_name":"comparison-zerotest-2","audit_type_name":"ballot_comparison","ballot_ids":[560,3619,4412,4643,7290,7908],"ballot_manifest":[{"batch_id":"0201-A-1","box_letter":"A","first_imprinted_id":237000001,"folder_num":"1","last_imprinted_id":237000297,"municipality":"Bristol","num_sheets":297,"precinct_num":"0201"},{"batch_id":"0201-A-2","box_letter":"A","first_imprinted_id":237000298,"folder_num":"2","last_imprinted_id":237000397,"municipality":"Bristol","num_sheets":100,"precinct_num":"0201"},{"batch_id":"0201-A-3","box_letter":"A","first_imprinted_id":237000398,"folder_num":"3","last_imprinted_id":237000496,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-4","box_letter":"A","first_imprinted_id":237000497,"folder_num":"4","last_imprinted_id":237000595,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-5","box_letter":"A","first_imprinted_id":237000596,"folder_num":"5","last_imprinted_id":237000695,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-6","box_letter":"A","first_imprinted_id":237000696,"folder_num":"6","last_imprinted_id":237000794,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-7","box_letter":"A","first_imprinted_id":237000795,"folder_num":"7","last_imprinted_id":237000848,"municipality":"Bristol","num_sheets":54,"precinct_num":"0201"},{"batch_id":"0202-B-1","box_letter":"B","first_imprinted_id":237000849,"folder_num":"1","last_imprinted_id":237001047,"municipality":"Bristol","num_sheets":198,"precinct_num":"0202"},{"batch_id":"0202-B-2","box_letter":"B","first_imprinted_id":237001048,"folder_num":"2","last_imprinted_id":237001247,"municipality":"Bristol","num_sheets":199,"precinct_num":"0202"},{"batch_id":"0202-B-3","box_letter":"B","first_imprinted_id":237001248,"folder_num":"3","last_imprinted_id":237001348,"municipality":"Bristol","num_sheets":101,"precinct_num":"0202"},{"batch_id":"0203-C-1","box_letter":"C","first_imprinted_id":237001349,"folder_num":"1","last_imprinted_id":237001546,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-2","box_letter":"C","first_imprinted_id":237001547,"folder_num":"2","last_imprinted_id":237001744,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-3","box_letter":"C","first_imprinted_id":237001745,"folder_num":"3","last_imprinted_id":237001942,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-4","box_letter":"C","first_imprinted_id":237001943,"folder_num":"4","last_imprinted_id":237002140,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-5","box_letter":"C","first_imprinted_id":237002141,"folder_num":"5","last_imprinted_id":237002338,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-6","box_letter":"C","first_imprinted_id":237002339,"folder_num":"6","last_imprinted_id":237002535,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-7","box_letter":"C","first_imprinted_id":237002536,"folder_num":"7","last_imprinted_id":237002732,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-8","box_letter":"C","first_imprinted_id":237002733,"folder_num":"8","last_imprinted_id":237002929,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-9","box_letter":"C","first_imprinted_id":237002930,"folder_num":"9","last_imprinted_id":237003047,"municipality":"Bristol","num_sheets":118,"precinct_num":"0203"},{"batch_id":"0204-D-1","box_letter":"D","first_imprinted_id":237003048,"folder_num":"1","last_imprinted_id":237003245,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-2","box_letter":"D","first_imprinted_id":237003246,"folder_num":"2","last_imprinted_id":237003443,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-3","box_letter":"D","first_imprinted_id":237003444,"folder_num":"3","last_imprinted_id":237003642,"municipality":"Bristol","num_sheets":199,"precinct_num":"0204"},{"batch_id":"0204-D-4","box_letter":"D","first_imprinted_id":237003643,"folder_num":"4","last_imprinted_id":237003840,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-5","box_letter":"D","first_imprinted_id":237003942,"folder_num":"5","last_imprinted_id":237004139,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-6","box_letter":"D","first_imprinted_id":237004140,"folder_num":"6","last_imprinted_id":237004242,"municipality":"Bristol","num_sheets":103,"precinct_num":"0204"},{"batch_id":"0205-E-1","box_letter":"E","first_imprinted_id":237004243,"folder_num":"1","last_imprinted_id":237004440,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-2","box_letter":"E","first_imprinted_id":237004441,"folder_num":"2","last_imprinted_id":237004640,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0025-E-3","box_letter":"E","first_imprinted_id":237004641,"folder_num":"3","last_imprinted_id":237004837,"municipality":"Bristol","num_sheets":197,"precinct_num":"0025"},{"batch_id":"0205-E-4","box_letter":"E","first_imprinted_id":237004838,"folder_num":"4","last_imprinted_id":237005035,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-5","box_letter":"E","first_imprinted_id":237005091,"folder_num":"5","last_imprinted_id":237005294,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-6","box_letter":"E","first_imprinted_id":237005295,"folder_num":"6","last_imprinted_id":237005512,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-7","box_letter":"E","first_imprinted_id":237005513,"folder_num":"7","last_imprinted_id":237005689,"municipality":"Bristol","num_sheets":177,"precinct_num":"0205"},{"batch_id":"0206-F-1","box_letter":"F","first_imprinted_id":237005690,"folder_num":"1","last_imprinted_id":237005888,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-2","box_letter":"F","first_imprinted_id":237005889,"folder_num":"2","last_imprinted_id":237006086,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-3","box_letter":"F","first_imprinted_id":237006087,"folder_num":"3","last_imprinted_id":237006284,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-4","box_letter":"F","first_imprinted_id":237006285,"folder_num":"4","last_imprinted_id":237006482,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-5","box_letter":"F","first_imprinted_id":237006483,"folder_num":"5","last_imprinted_id":237006682,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-6","box_letter":"F","first_imprinted_id":237006683,"folder_num":"6","last_imprinted_id":237006741,"municipality":"Bristol","num_sheets":59,"precinct_num":"0206"},{"batch_id":"0207-G-1","box_letter":"G","first_imprinted_id":237006743,"folder_num":"1","last_imprinted_id":237006944,"municipality":"Bristol","num_sheets":198,"precinct_num":"0207"},{"batch_id":"0207-G-2","box_letter":"G","first_imprinted_id":237006945,"folder_num":"2","last_imprinted_id":237007141,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-3","box_letter":"G","first_imprinted_id":237007142,"folder_num":"3","last_imprinted_id":237007339,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-4","box_letter":"G","first_imprinted_id":237007538,"folder_num":"4","last_imprinted_id":237007667,"municipality":"Bristol","num_sheets":130,"precinct_num":"0207"},{"batch_id":"0208-H-1","box_letter":"H","first_imprinted_id":237007668,"folder_num":"1","last_imprinted_id":237007890,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-2","box_letter":"H","first_imprinted_id":237007891,"folder_num":"2","last_imprinted_id":237008088,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-3","box_letter":"H","first_imprinted_id":237008089,"folder_num":"3","last_imprinted_id":237008287,"municipality":"Bristol","num_sheets":199,"precinct_num":"0208"},{"batch_id":"0208-H-4","box_letter":"H","first_imprinted_id":237008288,"folder_num":"4","last_imprinted_id":237008466,"municipality":"Bristol","num_sheets":177,"precinct_num":"0208"},{"batch_id":"0208-H-5","box_letter":"H","first_imprinted_id":237008530,"folder_num":"5","last_imprinted_id":237008597,"municipality":"Bristol","num_sheets":68,"precinct_num":"0208"},{"batch_id":"0209-I-1","box_letter":"I","first_imprinted_id":237008598,"folder_num":"1","last_imprinted_id":237008786,"municipality":"Bristol","num_sheets":189,"precinct_num":"0209"},{"batch_id":"0299-J-1","box_letter":"J","first_imprinted_id":237008787,"folder_num":"1","last_imprinted_id":237008991,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-2","box_letter":"J","first_imprinted_id":237008992,"folder_num":"2","last_imprinted_id":237009195,"municipality":"Bristol","num_sheets":204,"precinct_num":"0299"},{"batch_id":"0299-J-3","box_letter":"J","first_imprinted_id":237009196,"folder_num":"3","last_imprinted_id":237009396,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-4","box_letter":"J","first_imprinted_id":237009397,"folder_num":"4","last_imprinted_id":237009517,"municipality":"Bristol","num_sheets":118,"precinct_num":"0299"}],"cvr_hash":"test-hash","main_contest_in_progress":null,"reported_results":[{"contest_id":"senator","results":[{"candidate":"DEM Sheldon Whitehouse","proportion":0.595,"votes":5367},{"candidate":"REP Robert G. Flanders Jr.","proportion":0.389,"votes":3506},{"candidate":"Write-in","proportion":0.002,"votes":19},{"candidate":"undervote","proportion":0.014,"votes":127},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"rep_1","results":[{"candidate":"DEM David N. Cicilline (13215)","proportion":0.601,"votes":5424},{"candidate":"REP Patrick J. Donovan","proportion":0.379,"votes":3417},{"candidate":"Write-in","proportion":0.001,"votes":13},{"candidate":"undervote","proportion":0.018,"votes":166},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"governor","results":[{"candidate":"DEM Gina M. Raimondo","proportion":0.526,"votes":4749},{"candidate":"MOD William H. Gilbert","proportion":0.028,"votes":256},{"candidate":"REP Allan W. Fung","proportion":0.343,"votes":3094},{"candidate":"Com Anne Armstrong","proportion":0.011,"votes":103},{"candidate":"Ind Luis Daniel Munoz","proportion":0.014,"votes":123},{"candidate":"Ind Joseph A. Trillo","proportion":0.056,"votes":509},{"candidate":"Write-in","proportion":0.004,"votes":32},{"candidate":"undervote","proportion":0.016,"votes":143},{"candidate":"overvote","proportion":0.001,"votes":12}]},{"contest_id":"lieutenant_governor","results":[{"candidate":"DEM Daniel J. McKee","proportion":0.575,"votes":5184},{"candidate":"MOD Joel J. Hellmann","proportion":0.032,"votes":291},{"candidate":"REP Paul E. Pence","proportion":0.273,"votes":2464},{"candidate":"Ind Jonathan J. Riccitelli","proportion":0.028,"votes":251},{"candidate":"Ind Ross K. McCurdy","proportion":0.022,"votes":202},{"candidate":"Write-in","proportion":0.015,"votes":137},{"candidate":"undervote","proportion":0.054,"votes":490},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"secretary_of_state","results":[{"candidate":"DEM Nellie M. Gorbea","proportion":0.651,"votes":5873},{"candidate":"REP Pat V. Cortellessa","proportion":0.306,"votes":2757},{"candidate":"Write-in","proportion":0.001,"votes":10},{"candidate":"undervote","proportion":0.042,"votes":381},{"candidate":"overvote","proportion":0.0,"votes":0}]},{"contest_id":"attorney_general","results":[{"candidate":"DEM Peter F. Neronha","proportion":0.727,"votes":6560},{"candidate":"Com Alan Gordon","proportion":0.163,"votes":1468},{"candidate":"Write-in","proportion":0.006,"votes":51},{"candidate":"undervote","proportion":0.104,"votes":941},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"treasurer","results":[{"candidate":"DEM Seth Magaziner","proportion":0.658,"votes":5932},{"candidate":"REP Michael G. Riley","proportion":0.305,"votes":2751},{"candidate":"Write-in","proportion":0.008,"votes":7},{"candidate":"undervote","proportion":0.037,"votes":330},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_1","results":[{"candidate":"Approve","proportion":0.724,"votes":6534},{"candidate":"Reject","proportion":0.225,"votes":2027},{"candidate":"undervote","proportion":0.051,"votes":459},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_2","results":[{"candidate":"Approve","proportion":0.53,"votes":4779},{"candidate":"Reject","proportion":0.411,"votes":3708},{"candidate":"undervote","proportion":0.059,"votes":533},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_3","results":[{"candidate":"Approve","proportion":0.749,"votes":6753},{"candidate":"Reject","proportion":0.197,"votes":1779},{"candidate":"undervote","proportion":0.054,"votes":489}]}],"seed":"1","total_number_of_ballots":9021}\n')
    matcher.match_responses(expect, real)


def test_get_get_all_interpretations():
    request = Request(scheme='http', method='GET', headers={'Connection': 'keep-alive', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3123=0; gsScrollPos-3571='}, host='127.0.0.1:5000', path='/get-all-interpretations')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/html; charset=utf-8'}, body="[{'ballot_id': 560, 'contests': {'senator': 'DEM Sheldon Whitehouse', 'rep_1': 'DEM David N. Cicilline (13215)', 'governor': 'DEM Gina M. Raimondo', 'lieutenant_governor': 'DEM Daniel J. McKee', 'secretary_of_state': 'DEM Nellie M. Gorbea', 'attorney_general': 'DEM Peter F. Neronha', 'treasurer': 'DEM Seth Magaziner', 'issue_1': 'Approve', 'issue_2': 'Approve', 'issue_3': 'Approve'}}, {'ballot_id': 3619, 'contests': {'senator': 'REP Robert G. Flanders Jr.', 'rep_1': 'REP Patrick J. Donovan', 'governor': 'REP Allan W. Fung', 'lieutenant_governor': 'REP Paul E. Pence', 'secretary_of_state': 'REP Pat V. Cortellessa', 'attorney_general': 'Com Alan Gordon', 'treasurer': 'REP Michael G. Riley', 'issue_1': 'Reject', 'issue_2': 'Reject', 'issue_3': 'Reject'}}, {'ballot_id': 4412, 'contests': {'senator': 'Write-in', 'rep_1': 'Write-in', 'governor': 'DEM Gina M. Raimondo', 'lieutenant_governor': 'MOD Joel J. Hellmann', 'secretary_of_state': 'Write-in', 'attorney_general': 'Write-in', 'treasurer': 'Write-in', 'issue_1': 'undervote', 'issue_2': 'undervote', 'issue_3': 'undervote'}}, {'ballot_id': 4643, 'contests': {'senator': 'undervote', 'rep_1': 'undervote', 'governor': 'DEM Gina M. Raimondo', 'lieutenant_governor': 'Ind Jonathan J. Riccitelli', 'secretary_of_state': 'undervote', 'attorney_general': 'undervote', 'treasurer': 'undervote', 'issue_1': 'overvote', 'issue_2': 'overvote', 'issue_3': 'overvote'}}, {'ballot_id': 7290, 'contests': {'senator': 'overvote', 'rep_1': 'overvote', 'governor': 'DEM Gina M. Raimondo', 'lieutenant_governor': 'Ind Ross K. McCurdy', 'secretary_of_state': 'overvote', 'attorney_general': 'overvote', 'treasurer': 'overvote', 'issue_1': 'Approve', 'issue_2': 'Approve', 'issue_3': 'Approve'}}, {'ballot_id': 7908, 'contests': {'senator': 'DEM Sheldon Whitehouse', 'rep_1': 'DEM David N. Cicilline (13215)', 'governor': 'DEM Gina M. Raimondo', 'lieutenant_governor': 'Write-in', 'secretary_of_state': 'DEM Nellie M. Gorbea', 'attorney_general': 'DEM Peter F. Neronha', 'treasurer': 'DEM Seth Magaziner', 'issue_1': 'Approve', 'issue_2': 'Approve', 'issue_3': 'Approve'}}]")
    matcher.match_responses(expect, real)


def test_get_get_audit_types():
    request = Request(scheme='http', method='GET', headers={'Connection': 'keep-alive', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3123=0; gsScrollPos-3571='}, host='127.0.0.1:5000', path='/get-audit-types')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"types":["ballot_polling","ballot_comparison"]}\n')
    matcher.match_responses(expect, real)


def test_get_get_contests():
    request = Request(scheme='http', method='GET', headers={'Connection': 'keep-alive', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3123=0; gsScrollPos-3571='}, host='127.0.0.1:5000', path='/get-contests')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"contests":[{"candidates":["DEM Sheldon Whitehouse","REP Robert G. Flanders Jr."],"id":"senator","title":"Senator in Congress"},{"candidates":["DEM David N. Cicilline (13215)","REP Patrick J. Donovan"],"id":"rep_1","title":"Representative in Congress District 1 (13213)"},{"candidates":["DEM Gina M. Raimondo","MOD William H. Gilbert","REP Allan W. Fung","Com Anne Armstrong","Ind Luis Daniel Munoz","Ind Joseph A. Trillo"],"id":"governor","title":"Governor"},{"candidates":["DEM Daniel J. McKee","MOD Joel J. Hellmann","REP Paul E. Pence","Ind Jonathan J. Riccitelli","Ind Ross K. McCurdy"],"id":"lieutenant_governor","title":"Lieutenant Governor"},{"candidates":["DEM Nellie M. Gorbea","REP Pat V. Cortellessa"],"id":"secretary_of_state","title":"Secretary of State"},{"candidates":["DEM Peter F. Neronha","Com Alan Gordon"],"id":"attorney_general","title":"Attorney General"},{"candidates":["DEM Seth Magaziner","REP Michael G. Riley"],"id":"treasurer","title":"General Treasurer"},{"candidates":["Approve","Reject"],"id":"issue_1","title":"1. RHODE ISLAND SCHOOL BUILDINGS - $250,000,000"},{"candidates":["Approve","Reject"],"id":"issue_2","title":"2. HIGHER EDUCATION FACILITIES - $70,000,000"},{"candidates":["Approve","Reject"],"id":"issue_3","title":"3. GREEN ECONOMY AND CLEAN WATER - $47,300,000"}]}\n')
    matcher.match_responses(expect, real)


def test_get_get_ballot_ids():
    request = Request(scheme='http', method='GET', headers={'Connection': 'keep-alive', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3123=0; gsScrollPos-3571='}, host='127.0.0.1:5000', path='/get-ballot-ids')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"ballot_ids":[560,3619,4412,4643,7290,7908]}\n')
    matcher.match_responses(expect, real)


def test_get_ballot_pull_sheet_txt():
    request = Request(scheme='http', method='GET', headers={'Connection': 'keep-alive', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3123=0; gsScrollPos-3571='}, host='127.0.0.1:5000', path='/ballot-pull-sheet.txt')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'text/plain; charset=utf-8'}, body='Ballot Pull Sheet\n\nBallot Order:\n1. 560\n2. 3619\n3. 4412\n4. 4643\n5. 7290\n6. 7908\n\nSorted Order:\n1. 560\n2. 3619\n3. 4412\n4. 4643\n5. 7290\n6. 7908')
    matcher.match_responses(expect, real)


def test_post_get_audit_state_9():
    request = Request(scheme='http', method='POST', headers={'Connection': 'keep-alive', 'Content-Length': '0', 'Accept': '*/*', 'Origin': 'http://127.0.0.1:9000', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36', 'Dnt': '1', 'Content-Type': 'application/json', 'Referer': 'http://127.0.0.1:9000/', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9,eo;q=0.8', 'Cookie': 'gsScrollPos-6417=0; gsScrollPos-5300=0; gsScrollPos-2934=0; gsScrollPos-3120=0; gsScrollPos-3574=0; gsScrollPos-3508=; gsScrollPos-4736=0; gsScrollPos-3123=0; gsScrollPos-3571='}, host='127.0.0.1:5000', path='/get-audit-state')
    
    real = Response.from_requests_response(request.send_request(verify=verify_ssl))
    expect = Response(status=200, headers={'content-type': 'application/json'}, body='{"all_contests":[{"candidates":["DEM Sheldon Whitehouse","REP Robert G. Flanders Jr."],"id":"senator","title":"Senator in Congress"},{"candidates":["DEM David N. Cicilline (13215)","REP Patrick J. Donovan"],"id":"rep_1","title":"Representative in Congress District 1 (13213)"},{"candidates":["DEM Gina M. Raimondo","MOD William H. Gilbert","REP Allan W. Fung","Com Anne Armstrong","Ind Luis Daniel Munoz","Ind Joseph A. Trillo"],"id":"governor","title":"Governor"},{"candidates":["DEM Daniel J. McKee","MOD Joel J. Hellmann","REP Paul E. Pence","Ind Jonathan J. Riccitelli","Ind Ross K. McCurdy"],"id":"lieutenant_governor","title":"Lieutenant Governor"},{"candidates":["DEM Nellie M. Gorbea","REP Pat V. Cortellessa"],"id":"secretary_of_state","title":"Secretary of State"},{"candidates":["DEM Peter F. Neronha","Com Alan Gordon"],"id":"attorney_general","title":"Attorney General"},{"candidates":["DEM Seth Magaziner","REP Michael G. Riley"],"id":"treasurer","title":"General Treasurer"},{"candidates":["Approve","Reject"],"id":"issue_1","title":"1. RHODE ISLAND SCHOOL BUILDINGS - $250,000,000"},{"candidates":["Approve","Reject"],"id":"issue_2","title":"2. HIGHER EDUCATION FACILITIES - $70,000,000"},{"candidates":["Approve","Reject"],"id":"issue_3","title":"3. GREEN ECONOMY AND CLEAN WATER - $47,300,000"}],"all_interpretations":[{"ballot_id":560,"contests":{"attorney_general":"DEM Peter F. Neronha","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"DEM Daniel J. McKee","rep_1":"DEM David N. Cicilline (13215)","secretary_of_state":"DEM Nellie M. Gorbea","senator":"DEM Sheldon Whitehouse","treasurer":"DEM Seth Magaziner"}},{"ballot_id":3619,"contests":{"attorney_general":"Com Alan Gordon","governor":"REP Allan W. Fung","issue_1":"Reject","issue_2":"Reject","issue_3":"Reject","lieutenant_governor":"REP Paul E. Pence","rep_1":"REP Patrick J. Donovan","secretary_of_state":"REP Pat V. Cortellessa","senator":"REP Robert G. Flanders Jr.","treasurer":"REP Michael G. Riley"}},{"ballot_id":4412,"contests":{"attorney_general":"Write-in","governor":"DEM Gina M. Raimondo","issue_1":"undervote","issue_2":"undervote","issue_3":"undervote","lieutenant_governor":"MOD Joel J. Hellmann","rep_1":"Write-in","secretary_of_state":"Write-in","senator":"Write-in","treasurer":"Write-in"}},{"ballot_id":4643,"contests":{"attorney_general":"undervote","governor":"DEM Gina M. Raimondo","issue_1":"overvote","issue_2":"overvote","issue_3":"overvote","lieutenant_governor":"Ind Jonathan J. Riccitelli","rep_1":"undervote","secretary_of_state":"undervote","senator":"undervote","treasurer":"undervote"}},{"ballot_id":7290,"contests":{"attorney_general":"overvote","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"Ind Ross K. McCurdy","rep_1":"overvote","secretary_of_state":"overvote","senator":"overvote","treasurer":"overvote"}},{"ballot_id":7908,"contests":{"attorney_general":"DEM Peter F. Neronha","governor":"DEM Gina M. Raimondo","issue_1":"Approve","issue_2":"Approve","issue_3":"Approve","lieutenant_governor":"Write-in","rep_1":"DEM David N. Cicilline (13215)","secretary_of_state":"DEM Nellie M. Gorbea","senator":"DEM Sheldon Whitehouse","treasurer":"DEM Seth Magaziner"}}],"audit_name":"comparison-zerotest-2","audit_type_name":"ballot_comparison","ballot_ids":[560,3619,4412,4643,7290,7908],"ballot_manifest":[{"batch_id":"0201-A-1","box_letter":"A","first_imprinted_id":237000001,"folder_num":"1","last_imprinted_id":237000297,"municipality":"Bristol","num_sheets":297,"precinct_num":"0201"},{"batch_id":"0201-A-2","box_letter":"A","first_imprinted_id":237000298,"folder_num":"2","last_imprinted_id":237000397,"municipality":"Bristol","num_sheets":100,"precinct_num":"0201"},{"batch_id":"0201-A-3","box_letter":"A","first_imprinted_id":237000398,"folder_num":"3","last_imprinted_id":237000496,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-4","box_letter":"A","first_imprinted_id":237000497,"folder_num":"4","last_imprinted_id":237000595,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-5","box_letter":"A","first_imprinted_id":237000596,"folder_num":"5","last_imprinted_id":237000695,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-6","box_letter":"A","first_imprinted_id":237000696,"folder_num":"6","last_imprinted_id":237000794,"municipality":"Bristol","num_sheets":99,"precinct_num":"0201"},{"batch_id":"0201-A-7","box_letter":"A","first_imprinted_id":237000795,"folder_num":"7","last_imprinted_id":237000848,"municipality":"Bristol","num_sheets":54,"precinct_num":"0201"},{"batch_id":"0202-B-1","box_letter":"B","first_imprinted_id":237000849,"folder_num":"1","last_imprinted_id":237001047,"municipality":"Bristol","num_sheets":198,"precinct_num":"0202"},{"batch_id":"0202-B-2","box_letter":"B","first_imprinted_id":237001048,"folder_num":"2","last_imprinted_id":237001247,"municipality":"Bristol","num_sheets":199,"precinct_num":"0202"},{"batch_id":"0202-B-3","box_letter":"B","first_imprinted_id":237001248,"folder_num":"3","last_imprinted_id":237001348,"municipality":"Bristol","num_sheets":101,"precinct_num":"0202"},{"batch_id":"0203-C-1","box_letter":"C","first_imprinted_id":237001349,"folder_num":"1","last_imprinted_id":237001546,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-2","box_letter":"C","first_imprinted_id":237001547,"folder_num":"2","last_imprinted_id":237001744,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-3","box_letter":"C","first_imprinted_id":237001745,"folder_num":"3","last_imprinted_id":237001942,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-4","box_letter":"C","first_imprinted_id":237001943,"folder_num":"4","last_imprinted_id":237002140,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-5","box_letter":"C","first_imprinted_id":237002141,"folder_num":"5","last_imprinted_id":237002338,"municipality":"Bristol","num_sheets":198,"precinct_num":"0203"},{"batch_id":"0203-C-6","box_letter":"C","first_imprinted_id":237002339,"folder_num":"6","last_imprinted_id":237002535,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-7","box_letter":"C","first_imprinted_id":237002536,"folder_num":"7","last_imprinted_id":237002732,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-8","box_letter":"C","first_imprinted_id":237002733,"folder_num":"8","last_imprinted_id":237002929,"municipality":"Bristol","num_sheets":197,"precinct_num":"0203"},{"batch_id":"0203-C-9","box_letter":"C","first_imprinted_id":237002930,"folder_num":"9","last_imprinted_id":237003047,"municipality":"Bristol","num_sheets":118,"precinct_num":"0203"},{"batch_id":"0204-D-1","box_letter":"D","first_imprinted_id":237003048,"folder_num":"1","last_imprinted_id":237003245,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-2","box_letter":"D","first_imprinted_id":237003246,"folder_num":"2","last_imprinted_id":237003443,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-3","box_letter":"D","first_imprinted_id":237003444,"folder_num":"3","last_imprinted_id":237003642,"municipality":"Bristol","num_sheets":199,"precinct_num":"0204"},{"batch_id":"0204-D-4","box_letter":"D","first_imprinted_id":237003643,"folder_num":"4","last_imprinted_id":237003840,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-5","box_letter":"D","first_imprinted_id":237003942,"folder_num":"5","last_imprinted_id":237004139,"municipality":"Bristol","num_sheets":198,"precinct_num":"0204"},{"batch_id":"0204-D-6","box_letter":"D","first_imprinted_id":237004140,"folder_num":"6","last_imprinted_id":237004242,"municipality":"Bristol","num_sheets":103,"precinct_num":"0204"},{"batch_id":"0205-E-1","box_letter":"E","first_imprinted_id":237004243,"folder_num":"1","last_imprinted_id":237004440,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-2","box_letter":"E","first_imprinted_id":237004441,"folder_num":"2","last_imprinted_id":237004640,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0025-E-3","box_letter":"E","first_imprinted_id":237004641,"folder_num":"3","last_imprinted_id":237004837,"municipality":"Bristol","num_sheets":197,"precinct_num":"0025"},{"batch_id":"0205-E-4","box_letter":"E","first_imprinted_id":237004838,"folder_num":"4","last_imprinted_id":237005035,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-5","box_letter":"E","first_imprinted_id":237005091,"folder_num":"5","last_imprinted_id":237005294,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-6","box_letter":"E","first_imprinted_id":237005295,"folder_num":"6","last_imprinted_id":237005512,"municipality":"Bristol","num_sheets":197,"precinct_num":"0205"},{"batch_id":"0205-E-7","box_letter":"E","first_imprinted_id":237005513,"folder_num":"7","last_imprinted_id":237005689,"municipality":"Bristol","num_sheets":177,"precinct_num":"0205"},{"batch_id":"0206-F-1","box_letter":"F","first_imprinted_id":237005690,"folder_num":"1","last_imprinted_id":237005888,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-2","box_letter":"F","first_imprinted_id":237005889,"folder_num":"2","last_imprinted_id":237006086,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-3","box_letter":"F","first_imprinted_id":237006087,"folder_num":"3","last_imprinted_id":237006284,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-4","box_letter":"F","first_imprinted_id":237006285,"folder_num":"4","last_imprinted_id":237006482,"municipality":"Bristol","num_sheets":198,"precinct_num":"0206"},{"batch_id":"0206-F-5","box_letter":"F","first_imprinted_id":237006483,"folder_num":"5","last_imprinted_id":237006682,"municipality":"Bristol","num_sheets":199,"precinct_num":"0206"},{"batch_id":"0206-F-6","box_letter":"F","first_imprinted_id":237006683,"folder_num":"6","last_imprinted_id":237006741,"municipality":"Bristol","num_sheets":59,"precinct_num":"0206"},{"batch_id":"0207-G-1","box_letter":"G","first_imprinted_id":237006743,"folder_num":"1","last_imprinted_id":237006944,"municipality":"Bristol","num_sheets":198,"precinct_num":"0207"},{"batch_id":"0207-G-2","box_letter":"G","first_imprinted_id":237006945,"folder_num":"2","last_imprinted_id":237007141,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-3","box_letter":"G","first_imprinted_id":237007142,"folder_num":"3","last_imprinted_id":237007339,"municipality":"Bristol","num_sheets":197,"precinct_num":"0207"},{"batch_id":"0207-G-4","box_letter":"G","first_imprinted_id":237007538,"folder_num":"4","last_imprinted_id":237007667,"municipality":"Bristol","num_sheets":130,"precinct_num":"0207"},{"batch_id":"0208-H-1","box_letter":"H","first_imprinted_id":237007668,"folder_num":"1","last_imprinted_id":237007890,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-2","box_letter":"H","first_imprinted_id":237007891,"folder_num":"2","last_imprinted_id":237008088,"municipality":"Bristol","num_sheets":198,"precinct_num":"0208"},{"batch_id":"0208-H-3","box_letter":"H","first_imprinted_id":237008089,"folder_num":"3","last_imprinted_id":237008287,"municipality":"Bristol","num_sheets":199,"precinct_num":"0208"},{"batch_id":"0208-H-4","box_letter":"H","first_imprinted_id":237008288,"folder_num":"4","last_imprinted_id":237008466,"municipality":"Bristol","num_sheets":177,"precinct_num":"0208"},{"batch_id":"0208-H-5","box_letter":"H","first_imprinted_id":237008530,"folder_num":"5","last_imprinted_id":237008597,"municipality":"Bristol","num_sheets":68,"precinct_num":"0208"},{"batch_id":"0209-I-1","box_letter":"I","first_imprinted_id":237008598,"folder_num":"1","last_imprinted_id":237008786,"municipality":"Bristol","num_sheets":189,"precinct_num":"0209"},{"batch_id":"0299-J-1","box_letter":"J","first_imprinted_id":237008787,"folder_num":"1","last_imprinted_id":237008991,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-2","box_letter":"J","first_imprinted_id":237008992,"folder_num":"2","last_imprinted_id":237009195,"municipality":"Bristol","num_sheets":204,"precinct_num":"0299"},{"batch_id":"0299-J-3","box_letter":"J","first_imprinted_id":237009196,"folder_num":"3","last_imprinted_id":237009396,"municipality":"Bristol","num_sheets":201,"precinct_num":"0299"},{"batch_id":"0299-J-4","box_letter":"J","first_imprinted_id":237009397,"folder_num":"4","last_imprinted_id":237009517,"municipality":"Bristol","num_sheets":118,"precinct_num":"0299"}],"cvr_hash":"test-hash","main_contest_in_progress":null,"reported_results":[{"contest_id":"senator","results":[{"candidate":"DEM Sheldon Whitehouse","proportion":0.595,"votes":5367},{"candidate":"REP Robert G. Flanders Jr.","proportion":0.389,"votes":3506},{"candidate":"Write-in","proportion":0.002,"votes":19},{"candidate":"undervote","proportion":0.014,"votes":127},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"rep_1","results":[{"candidate":"DEM David N. Cicilline (13215)","proportion":0.601,"votes":5424},{"candidate":"REP Patrick J. Donovan","proportion":0.379,"votes":3417},{"candidate":"Write-in","proportion":0.001,"votes":13},{"candidate":"undervote","proportion":0.018,"votes":166},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"governor","results":[{"candidate":"DEM Gina M. Raimondo","proportion":0.526,"votes":4749},{"candidate":"MOD William H. Gilbert","proportion":0.028,"votes":256},{"candidate":"REP Allan W. Fung","proportion":0.343,"votes":3094},{"candidate":"Com Anne Armstrong","proportion":0.011,"votes":103},{"candidate":"Ind Luis Daniel Munoz","proportion":0.014,"votes":123},{"candidate":"Ind Joseph A. Trillo","proportion":0.056,"votes":509},{"candidate":"Write-in","proportion":0.004,"votes":32},{"candidate":"undervote","proportion":0.016,"votes":143},{"candidate":"overvote","proportion":0.001,"votes":12}]},{"contest_id":"lieutenant_governor","results":[{"candidate":"DEM Daniel J. McKee","proportion":0.575,"votes":5184},{"candidate":"MOD Joel J. Hellmann","proportion":0.032,"votes":291},{"candidate":"REP Paul E. Pence","proportion":0.273,"votes":2464},{"candidate":"Ind Jonathan J. Riccitelli","proportion":0.028,"votes":251},{"candidate":"Ind Ross K. McCurdy","proportion":0.022,"votes":202},{"candidate":"Write-in","proportion":0.015,"votes":137},{"candidate":"undervote","proportion":0.054,"votes":490},{"candidate":"overvote","proportion":0.0002,"votes":2}]},{"contest_id":"secretary_of_state","results":[{"candidate":"DEM Nellie M. Gorbea","proportion":0.651,"votes":5873},{"candidate":"REP Pat V. Cortellessa","proportion":0.306,"votes":2757},{"candidate":"Write-in","proportion":0.001,"votes":10},{"candidate":"undervote","proportion":0.042,"votes":381},{"candidate":"overvote","proportion":0.0,"votes":0}]},{"contest_id":"attorney_general","results":[{"candidate":"DEM Peter F. Neronha","proportion":0.727,"votes":6560},{"candidate":"Com Alan Gordon","proportion":0.163,"votes":1468},{"candidate":"Write-in","proportion":0.006,"votes":51},{"candidate":"undervote","proportion":0.104,"votes":941},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"treasurer","results":[{"candidate":"DEM Seth Magaziner","proportion":0.658,"votes":5932},{"candidate":"REP Michael G. Riley","proportion":0.305,"votes":2751},{"candidate":"Write-in","proportion":0.008,"votes":7},{"candidate":"undervote","proportion":0.037,"votes":330},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_1","results":[{"candidate":"Approve","proportion":0.724,"votes":6534},{"candidate":"Reject","proportion":0.225,"votes":2027},{"candidate":"undervote","proportion":0.051,"votes":459},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_2","results":[{"candidate":"Approve","proportion":0.53,"votes":4779},{"candidate":"Reject","proportion":0.411,"votes":3708},{"candidate":"undervote","proportion":0.059,"votes":533},{"candidate":"overvote","proportion":0.0001,"votes":1}]},{"contest_id":"issue_3","results":[{"candidate":"Approve","proportion":0.749,"votes":6753},{"candidate":"Reject","proportion":0.197,"votes":1779},{"candidate":"undervote","proportion":0.054,"votes":489}]}],"seed":"1","total_number_of_ballots":9021}\n')
    matcher.match_responses(expect, real)


